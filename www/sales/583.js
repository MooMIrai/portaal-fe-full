"use strict";(self.webpackChunkportaal_mfe_sales=self.webpackChunkportaal_mfe_sales||[]).push([[583],{1977:(e,t,r)=>{r.d(t,{Bl:()=>l,Fv:()=>c,bt:()=>i,hV:()=>u,o5:()=>s});var n=r(7136);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=function(e){return e.data.map((function(e){return{label:e.description,value:e.id}}))};function l(e){var t,r,n;return{id:e.id,protocol:e.project_code,title:e.name,end_date:e.deadline_date?new Date(e.deadline_date):void 0,description:e.other_details,rate:e.rate,amount:e.amount,NoCollective:e.noCollective||!1,customer_id:e.customer_id||0,customer_name:null===(t=e.Customer)||void 0===t?void 0:t.name,customer:{id:e.customer_id||0,name:e.Customer?e.Customer.name:""},creation_date:e.date_created?new Date(e.date_created):void 0,approval_date:e.approval_date?new Date(e.approval_date):void 0,accountManager_id:e.accountManager_id||0,accountManager:{id:e.accountManager_id||0,name:(null===(r=e.AccountManager)||void 0===r?void 0:r.Person.firstName)+" "+(null===(n=e.AccountManager)||void 0===n?void 0:n.Person.lastName)},project_type_id:e.project_type_id||0,project_type:e.ProjectType?{id:e.ProjectType.id,name:e.ProjectType.description}:void 0,location_id:e.location_id,billing_type:e.billing_type?{id:e.billing_type,name:u(e.billing_type)}:void 0,outcome_type:e.OutcomeType?{id:e.OutcomeType,name:s(e.OutcomeType)}:void 0,existingFile:e.files,year:e.year?new Date(e.year,1,1):void 0,thereIsFile:Array.isArray(e.files)&&e.files.length>0,days:e.days,thereisProject:!!e.Project,files:e.files}}function c(e){var t,r,n,a,i,l,c,u,s,d=e.attachment;return e.attachment&&(e.attachment.create&&(d.create=d.create.map((function(e){return o(o({},e),{},{property:"files"})}))),e.attachment.delete&&e.attachment.delete.deletedFiles&&(e.attachment.delete.deletedFiles=e.attachment.delete.deletedFiles.map((function(e){return o(o({},e),{},{property:"files"})})))),{id:e.id,project_code:e.protocol,name:e.title,Attachment:d,deadline_date:(null===(t=e.end_date)||void 0===t?void 0:t.toISOString())||void 0,other_details:e.description||"",rate:e.rate&&parseFloat(e.rate.toString()),amount:e.amount&&parseFloat(e.amount.toString()),customer_id:null===(r=e.customer)||void 0===r?void 0:r.id,location_id:(null===(n=e.location)||void 0===n?void 0:n.id)||1,accountManager_id:null===(a=e.accountManager)||void 0===a?void 0:a.id,project_type_id:null===(i=e.project_type)||void 0===i?void 0:i.id,billing_type:e.billing_type?e.billing_type.id:void 0,OutcomeType:null===(l=e.outcome_type)||void 0===l?void 0:l.id,year:e.year?e.year.getFullYear():void 0,days:e.days&&Number(e.days),noCollective:e.NoCollective,approval_date:(null===(c=e.approval_date)||void 0===c?void 0:c.toISOString())||void 0,ProjectData:e.start_date?{start_date:(null===(u=e.start_date)||void 0===u?void 0:u.toISOString())||"",end_date:(null===(s=e.end_dateP)||void 0===s?void 0:s.toISOString())||void 0,orderNum:e.orderNum||void 0,waitingForOrder:e.waitingForOrder||!1}:void 0}}var u=function(e){switch(e){case"Daily":return"Fatturazione a giornata";case"LumpSum":return"Fatturazione a corpo"}return"Nessuna Fatturazione"},s=function(e){switch(e){case"P":return"Positivo";case"N":return"Negativo";case"A":return"Annullato";case"R":return"Rimandato";case"W":return"In Attesa";case"C":return"Chiuso"}return"Nessun esito"}},2359:(e,t,r)=>{r.d(t,{A:()=>L});var n=r(2816),a=r(2207),o=r.n(a),i=r(4914),l=r.n(i),c=r(9029),u=r.n(c),s=r(6531),d=r(7255),p=r(8733),f=r.n(p),m=r(4540),b=r.n(m);function v(e){return{id:e.id,customer_code:e.customer_code,name:e.name,vatNumber:e.vatNumber||e.taxCode,web_site:e.web_site,email:e.email,phone:e.phoneNumber,fax:e.fax,address:e.address,zipCode:e.zipCode,city:e.city||0,discountPerc:0}}var y=r(8539),g=r.n(y),h=r(5072),A=r.n(h),w=r(7825),O=r.n(w),E=r(7659),S=r.n(E),j=r(5056),x=r.n(j),C=r(540),k=r.n(C),P=r(1113),_=r.n(P),D=r(8215),I={};I.styleTagTransform=_(),I.setAttributes=x(),I.insert=S().bind(null,"head"),I.domAPI=O(),I.insertStyleElement=k(),A()(D.A,I);const B=D.A&&D.A.locals?D.A.locals:void 0;function N(e){var t,r,n,a,o,c,u,s,p=(0,i.useRef)(),m=(0,i.useState)(0),v=(0,d.A)(m,2),y=v[0],h=v[1],A=(0,i.useState)(e.row),w=(0,d.A)(A,2),O=w[0],E=w[1],S=function(){var t,r=!1;if(("create"===e.type||"edit"===e.type)&&(p.current&&(p.current.onSubmit(),p.current.isValid()?E(p.current.values):r=!0),!r)){var n={id:(t=p.current.values).id,customer_code:t.customer_code,name:t.name,phoneNumber:t.phone,web_site:t.web_site,fax:t.fax,email:t.email,address:t.address,zipCode:t.zipCode,city:"number"==typeof t.city?t.city.toString():t.city,vatNumber:t.vatNumber,taxCode:t.vatNumber,data:{}};e.onSubmit(e.type,n,e.refreshTable,e.row.id,e.closeModalCallback)}"delete"===e.type&&e.onSubmit(e.type,{},e.refreshTable,e.row.id,e.closeModalCallback),"view"===e.type&&e.closeModalCallback()};return"delete"===e.type?l().createElement("div",{className:B.formDelete},l().createElement("span",null,"Sei sicuro di voler eliminare il record?"),l().createElement("div",null,l().createElement(g(),{onClick:function(){return e.closeModalCallback()}},"Cancel"),l().createElement(g(),{themeColor:"error",onClick:S},"Elimina"))):l().createElement(b(),{tabs:[{title:"Dati Cliente",children:l().createElement("div",{className:B.parentForm},l().createElement(f(),{ref:p,fields:Object.values((t=O,r=e.type,n=function(e){return/^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/.test(e)?"":"Il campo deve contenere solo lettere"},a=function(e){return/^\d{11}$/.test(e)?"":"Il campo deve contenere una partita IVA valida (11 cifre)"},o=function(e){return!e||/^(0\d{1,4}\d{5,9}|\+39\s?0\d{1,4}\d{5,9})$/.test(e)},c=function(e){return/^(\d{1,2}(\.\d+)?|100(\.0+)?)(%)?$/.test(e)?"":"Il campo deve contenere una percentuale valida (0-100)"},u=function(e,t){return e&&e.length?t(e):""},s=function(e){return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"L'email non è valida":""},{customer_code:{name:"customer_code",label:"Codice cliente",type:"text",value:t.customer_code||"",required:!0,disabled:"view"===r,validator:function(e){return e?"":"Il campo Codice Cliente è obbligatorio"}},name:{name:"name",label:"Ragione sociale",type:"text",value:t.name||"",required:!0,disabled:"view"===r,validator:function(e){return e?"":"Il campo Ragione Sociale è obbligatorio"}},vatNumber:{name:"vatNumber",label:"Partita Iva",type:"number",value:t.vatNumber||"",validator:function(e){return u(e,a)}},web_site:{name:"web_site",label:"Sito web",type:"text",value:t.web_site||"",disabled:"view"===r},email:{name:"email",label:"Email",type:"email",disabled:"view"===r,value:t.email||"",validator:function(e){return u(e,s)}},phone:{name:"phone",label:"Telefono",type:"text",disabled:"view"===r,value:t.phone||"",validator:function(e){return u(e,o)}},fax:{name:"fax",label:"Fax",type:"text",disabled:"view"===r,value:t.fax||"",validator:function(e){return u(e,o)}},address:{name:"address",label:"Indirizzo",type:"text",disabled:"view"===r,value:t.address||""},city:{name:"city",label:"Comune",type:"text",disabled:"view"===r,value:t.city||"",validator:function(e){return u(e,n)}},discountPerc:{name:"discountPerc",label:"Percentuale sconto",type:"number",disabled:"view"===r,value:t.discountPerc||"",validator:function(e){return u(e,c)}}})),formData:O,onSubmit:function(e){return E(e)}}))}],onSelect:function(e){h(e.selected)},selected:y,button:{label:"view"===e.type?"Esci":"Salva",onClick:S}})}var F=r(8500),T=r.n(F),z=[{key:"customer_code",label:"Codice",type:"string",sortable:!0,filter:"text"},{key:"name",label:"Ragione sociale",type:"string",sortable:!0,filter:"text"},{key:"email",label:"Email",type:"string",sortable:!0,filter:"text"},{key:"web_site",label:"Sito web",type:"string",sortable:!0,filter:"text"},{key:"vatNumber",label:"P.IVA",type:"string",sortable:!0,filter:"numeric"}];const L=function(){var e=function(){var e=(0,n.A)(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,s.m.search(t.currentPage,t.pageSize,r,n,!0);case 3:return a=e.sent,e.abrupt("return",{data:a.data.map(v),meta:a.meta});case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),t=function(e,t,r,n,a){var o=void 0;"create"===e?o=s.m.createResource(t):"edit"===e?o=s.m.updateResource(n,t):"delete"===e&&(o=s.m.deleteResource(n)),o&&o.then((function(){T().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo"),r(),a()})).catch((function(e){console.error("Error during form submission:",e)}))};return l().createElement(u(),{writePermissions:["WRITE_SALES_CUSTOMER"],filterable:!0,pageable:!0,sortable:!0,getData:e,columns:z,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return["show","edit","delete","create"]},formCrud:function(e,r,n,a){return l().createElement(l().Fragment,null,l().createElement(N,{row:e,type:r,closeModalCallback:n,refreshTable:a,onSubmit:t}))}})}},4029:(e,t,r)=>{r.d(t,{A:()=>ce});var n=r(2816),a=r(7255),o=r(7136),i=r(2207),l=r.n(i),c=r(4914),u=r.n(c),s=r(8500),d=r.n(s),p=r(9029),f=r.n(p),m=r(3558),b=r(1977),v=r(8539),y=r.n(v),g=r(8733),h=r.n(g),A=r(4540),w=r.n(A),O=function(e,t,r,n,a,o,i,l,c,u,s,d,p,f){var m=function(e,t){return c&&!e?"Il campo ".concat(t," è obbligatorio quando la fatturazione è giornaliera"):""};"edit"!==t&&"view"!==t||(e.location=i||e.location);var b={billing_type:{name:"billing_type",label:"Tipo Fatturazione",type:"billingtype-selector",value:e.billing_type,valueOnChange:s,required:!0,disabled:"view"===t,validator:function(e){return e?"":"Selezionare un Tipo di fatturazione valida"}},creation_date:{name:"creation_date",label:"Data creazione",type:"date",value:e.creation_date,disabled:!0,conditions:function(e){return"edit"===t||"view"===t}},accountManager:{name:"accountManager",label:"Commerciale di riferimento",type:"commerciale-selector",value:e.accountManager,required:!0,disabled:"view"===t,validator:function(e){return e?"":"Selezionare un Commerciale valido"}},year:{name:"year",label:"Anno di riferimento",type:"year",value:e.year,disabled:"view"===t},project_type:{name:"project_type",label:"Tipo di offerta",type:"projecttype-selector",value:e.project_type,valueOnChange:l,required:!0,disabled:"view"===t,validator:function(e){return e?"":"Selezionare un tipo offerta"}},customer:{name:"customer",label:"Cliente",type:"customer-selector",value:e.customer,required:!0,valueOnChange:l,disabled:"view"===t,validator:function(e){return e?"":"Selezionare un Cliente valido"}}};return b.rate={name:"rate",label:"Tariffa",type:"number",value:e.rate,valueOnChange:l,required:c,disabled:"view"===t,validator:function(e){return m(e,"Tariffa")},conditions:function(e){var t;return"Daily"===(null===(t=e.billing_type)||void 0===t?void 0:t.id)}},b.days={name:"days",label:"Giorni offerti",type:"number",value:e.days,valueOnChange:l,required:c,disabled:"view"===t,validator:function(e){return m(e,"Giorni offerti")},conditions:function(e){var t;return"Daily"===(null===(t=e.billing_type)||void 0===t?void 0:t.id)}},b.amount={name:"amount",label:"Importo",type:"number",value:e.amount,required:u,disabled:"view"===t,conditions:function(e){var t;return"Daily"!==(null===(t=e.billing_type)||void 0===t?void 0:t.id)},validator:function(e){return!e&&u?"Il campo Importo è obbligatorio":""}},b.title={name:"title",label:"Titolo",type:"text",value:e.title,required:!0,disabled:"view"===t,validator:function(e){return e?"":"Il campo Titolo è obbligatorio"}},b.protocol={name:"protocol",label:"Protocollo",type:"protocol-input",value:e.protocol,options:function(){return d},required:!0,disabled:"view"===t,validator:function(e){return e?"":"Il campo Protocollo è obbligatorio"}},b.location={name:"location",label:"Sede",type:"sede-selector",value:e.location,required:!0,disabled:"view"===t},b.approval_date={name:"approval_date",label:"Data approvazione",type:"date",value:e.approval_date,disabled:"view"===t,validator:f},b.end_date={name:"end_date",label:"Data scadenza",type:"date",value:e.end_date,disabled:"view"===t,validator:p},b.outcome_type={name:"outcome_type",label:"Tipo Esito",type:"outcometype-selector",value:e.outcome_type,required:!0,disabled:"view"===t,validator:function(e){return e?"":"Selezionare un esito valido"}},b.NoCollective={name:"NoCollective",label:"Fuori accordo quadro",type:"checkbox",showLabel:!1,value:e.NoCollective||!1,disabled:"view"===t},b.description={name:"description",label:"Descrizione",type:"textarea",value:e.description,disabled:"view"===t},b.attachment={name:"attachment",label:"Carica Offerta",type:"uploadMultipleFiles",disabled:"view"===t,existingFile:e.existingFile},b},E=function(e,t,r,n){return{start_date:{name:"start_date",label:"Data di inizio",type:"date",required:!0,value:null==e?void 0:e.start_date,valueOnChange:function(e){return t("start_date",e)},validator:r},end_dateP:{name:"end_dateP",label:"Data di fine",type:"date",valueOnChange:function(e){return t("end_dateP",e)},value:null==e?void 0:e.end_dateP,validator:n},orderNum:{name:"orderNum",label:"Numero ordine cliente",type:"text",value:null==e?void 0:e.orderNum},waitingForOrder:{name:"waitingForOrder",label:"In Attesa di ordine",type:"checkbox",showLabel:!1,value:(null==e?void 0:e.waitingForOrder)||!1}}},S=r(5285),j=r(7026),x=r.n(j),C=r(8734),k=r.n(C),P=r(6531),_=r(1315),D=r(1932),I=r.n(D),B=function(){var e=(0,n.A)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.R.getProtocol(t);case 2:return r=e.sent,n=r.protocol,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={"projecttype-selector":x()(k()((function(e){return m.R.getProjectType(e).then((function(e){return e?e.data.data.map((function(e){return{id:e.id,name:e.description}})):[]}))}))),"commerciale-selector":x()(k()((function(e){return _.L.searchCommerciale(e).then((function(e){return e?e.map((function(e){return{id:e.id,name:"".concat(e.Person.firstName," ").concat(e.Person.lastName," (").concat(e.email,")")}})):[]}))}))),"customer-selector":x()(k()((function(e){return P.m.search(1,20,{logic:"or",filters:[{field:"name",operator:"contains",value:e}]}).then((function(e){if(e)return e.data}))}))),"sede-selector":x()(k()((function(){return m.R.fetchResources("location").then((function(e){return e&&e.data&&Array.isArray(e.data)?e.data.map((function(e){return{id:e.id,name:e.description}})):(console.warn("Formato della risposta non previsto:",e),[])})).catch((function(e){return console.error("Errore nel recupero dei dati:",e),[]}))}))),"outcometype-selector":x()(k()((function(e){return m.R.getOutcomeType(e)}))),"billingtype-selector":x()(k()((function(e){return m.R.getBillingType(e)}))),"protocol-input":x()((function(e){return u().createElement("div",{style:{display:"grid",gridTemplateColumns:"80% 20%"}},u().createElement(I(),(0,S.A)({},e,{style:{borderEndEndRadius:0,borderStartEndRadius:0,width:"100%"},label:void 0})),u().createElement(y(),{style:{borderStartStartRadius:0,borderEndStartRadius:0},themeColor:"primary",type:"button",onClick:(0,n.A)(l().mark((function t(){var r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(null===(r=e.options())||void 0===r?void 0:r.customer_code)||"XXX",t.next=3,B(n);case 3:a=t.sent,e.onChange({value:a});case 5:case"end":return t.stop()}}),t)})))},"Genera"))}))},F=r(6353),T=r.n(F),z=r(7903),L=r.n(z),R=r(5072),M=r.n(R),W=r(7825),q=r.n(W),Q=r(7659),G=r.n(Q),H=r(5056),V=r.n(H),K=r(540),U=r.n(K),Y=r(1113),Z=r.n(Y),J=r(1294),X={};X.styleTagTransform=Z(),X.setAttributes=V(),X.insert=G().bind(null,"head"),X.domAPI=q(),X.insertStyleElement=U(),M()(J.A,X);const $=J.A&&J.A.locals?J.A.locals:void 0;function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e){var t=(0,c.useRef)(),r=(0,c.useRef)(),i=(0,c.useState)(0),s=(0,a.A)(i,2),p=s[0],f=s[1],v=(0,c.useState)(e.row),g=(0,a.A)(v,2),A=g[0],S=g[1],j=(0,c.useState)(),x=(0,a.A)(j,2),C=x[0],k=x[1],P=(0,c.useState)(!1),_=(0,a.A)(P,2),D=_[0],I=_[1],B=(0,c.useState)({}),F=(0,a.A)(B,2),z=F[0],R=F[1],M=(0,c.useState)(null),W=(0,a.A)(M,2),q=W[0],Q=W[1],G=(0,c.useState)([]),H=(0,a.A)(G,2),V=H[0],K=H[1],U=(0,c.useState)(!1),Y=(0,a.A)(U,2),Z=Y[0],J=Y[1],X=(0,c.useState)(!1),ee=(0,a.A)(X,2),re=ee[0],ne=ee[1],ae=(0,c.useState)(!1),oe=(0,a.A)(ae,2),ie=oe[0],le=oe[1],ce=(0,c.useState)(!1),ue=(0,a.A)(ce,2),se=ue[0],de=ue[1],pe=(0,c.useState)(!1),fe=(0,a.A)(pe,2),me=fe[0],be=fe[1],ve=(0,c.useState)({id:0,name:""}),ye=(0,a.A)(ve,2),ge=ye[0],he=ye[1],Ae=(0,c.useState)(),we=(0,a.A)(Ae,2),Oe=we[0],Ee=we[1];(0,c.useEffect)((function(){var e=function(){var e=(0,n.A)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.R.fetchResources("location");case 3:t=e.sent,r=(0,b.bt)(t),K(r),J(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching country data:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[e.row,e.type]),(0,c.useEffect)((function(){if(Z&&("edit"===e.type||"view"===e.type)){var t=Ce(V,e.row.location_id);t&&he({id:e.row.location_id,name:t}),ne(!0)}}),[V,e.row.location_id,Z,e.type]),(0,c.useEffect)((function(){var t,r;"edit"===e.type&&re&&("Consulenza"===(null===(t=A.project_type)||void 0===t?void 0:t.name)&&"Fatturazione a giornata"===(null===(r=A.billing_type)||void 0===r?void 0:r.name)?le(!0):le(!1))}),[e.type,re]),(0,c.useEffect)((function(){A&&A.customer&&Se(A.customer)}),[A]);var Se=function(e){return Ee(e)},je=function(){var e=(0,n.A)(l().mark((function e(t,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{fileId:t,fileName:r});case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),xe=function(r,n){if("project_type"===r&&"Consulenza"===(null==n?void 0:n.name)){var a={id:"Daily",name:"Fatturazione a giornata"};t.current.values.billing_type=a,le(!0),"edit"===e.type&&R((function(e){return te(te({},e),{},{billing_type:a})}))}"billing_type"===r&&("Fatturazione a corpo"===(null==n?void 0:n.name)?de(!0):de(!1)),z[r]!==n&&(R((function(e){return te(te({},e),{},(0,o.A)({},r,n))})),"edit"===e.type&&"location"===r&&he(n)),"customer"===r&&Se(n)},Ce=function(e,t){var r;return Array.isArray(e)&&(null===(r=e.find((function(e){return e.value===t})))||void 0===r?void 0:r.label)||" "},ke=function(){var r=!1;"create"!==e.type&&"edit"!==e.type||(t.current&&(t.current.onSubmit(),t.current.isValid()?S(t.current.values):r=!0),r||("Positivo"!==t.current.values.outcome_type.name||A.thereisProject?Be(t.current.values):d().openConfirm("Salvando i dati con esito positivo, è necessario creare una nuova commessa. Vuoi procedere?",(function(){Ne()}),"Conferma Salvataggio"))),"delete"===e.type&&e.onSubmit(e.type,{},e.refreshTable,e.row.id,e.closeModalCallback),"view"===e.type&&e.closeModalCallback()},Pe=(0,c.useMemo)((function(){return function(e,t){if(!e)return"Seleziona una data";var r=new Date(e),n=t("end_dateP"),a=n?new Date(n):null;return a&&r>=a?"La data di inizio deve essere anteriore alla data di fine":""}}),[]),_e=(0,c.useMemo)((function(){return function(e,t){if(!e)return"";var r=new Date(e),n=t("start_date"),a=n?new Date(n):null;return a&&r<=a?"La data di fine deve essere posteriore alla data di inizio":""}}),[]),De=(0,c.useMemo)((function(){return function(e,t){if(!e)return"";var r=new Date(e),n=t("approval_date"),a=n?new Date(n):null;return a&&r<=a?"La data di scadenza non può essere uguale o precedente alla data di approvazione":""}}),[]),Ie=(0,c.useMemo)((function(){return function(e,r){if(t.current&&t.current.values.outcome_type&&"P"===t.current.values.outcome_type.id){if(!e)return"La data di approvazione è obbligatoria";var n=new Date(e),a=r("end_date"),o=a?new Date(a):null;if(o&&n>=o)return"La data di approvazione non può essere uguale o successiva alla data di scadenza"}return""}}),[t.current]),Be=function(t){var r=t||A,n=(0,b.Fv)(te({},r));e.onSubmit(e.type,n,e.refreshTable,e.row.id,e.closeModalCallback)},Ne=function(){be(!0)};return!Z||"create"!==e.type&&"delete"!==e.type&&!re?u().createElement("div",{className:$.loader},u().createElement(T(),{type:"pulsing"})):"delete"===e.type?u().createElement("div",{className:$.formDelete},u().createElement("span",null,"Sei sicuro di voler eliminare il record?"),u().createElement("div",null,u().createElement(y(),{onClick:function(){return e.closeModalCallback()}},"Cancel"),u().createElement(y(),{themeColor:"error",onClick:ke},"Elimina"))):u().createElement(u().Fragment,null,u().createElement(w(),{tabs:[{title:"Dati Offerta",children:u().createElement("div",{className:$.parentForm},u().createElement(h(),{ref:t,fields:Object.values(O(A,e.type,je,(function(e,t){!function(e,t){if(void 0===t||0===t.length)I(!1);else{var r=t[0].name;Q(r),I(!1)}}(0,t),xe(e,t)}),D,q,ge,xe,ie,se,(function(e,t){!function(e,t){"Fatturazione a giornata"===(null==t?void 0:t.name)?le(!0):le(!1)}(0,t),xe(e,t)}),Oe,De,Ie)),formData:A,onSubmit:function(e){return S(e)},addedFields:N}))}],onSelect:function(e){f(e.selected)},selected:p,button:{label:"view"===e.type?"Esci":"Salva",onClick:ke}}),me&&u().createElement(L(),{show:me,title:"Nuova Commessa",onClose:function(){return be(!1)},callToAction:"Salva",draggable:!0,resizable:!0,initialHeight:550,initialWidth:800},u().createElement("div",null,u().createElement("div",{className:$.parentForm},u().createElement(h(),{ref:r,formData:C,fields:Object.values(E(C,xe,Pe,_e)),onSubmit:function(e){return k(e)}})),u().createElement("div",{className:$.buttons},u().createElement(y(),{onClick:function(){return be(!1)}},"Annulla"),u().createElement(y(),{themeColor:"primary",onClick:function(){var t,n=!1;"create"!==e.type&&"edit"!==e.type||(r.current&&(r.current.onSubmit(),r.current.isValid()||(n=!0)),n||(t=te(te(te({},z),A),r.current.values),S(t),Be(t),be(!1)))}},"Salva")))))}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=[{key:"customer_name",label:"Cliente",type:"string",sortable:!0,filter:"text"},{key:"accountManager.name",label:"Commerciale",type:"string",sortable:!0},{key:"protocol",label:"Protocollo",type:"string",sortable:!0,filter:"text"},{key:"title",label:"Titolo",type:"string",sortable:!0,filter:"text"},{key:"description",label:"Descrizione",type:"string",sortable:!0,filter:"text"},{key:"creation_date",label:"Data creazione",type:"date",sortable:!0,filter:"date"}],ie={customer_name:"Customer.name","accountManager.name":"AccountManager.Person.lastName",protocol:"project_code",title:"name",description:"other_details",creation_date:"date_created"},le=function(e){if(!e||!e.filters)return{logic:"or",filters:[]};var t=e.filters.map((function(e){if("field"in e){var t=e;return ae(ae({},t),{},{field:ie[t.field]||t.field})}return le(e)}));return ae(ae({},e),{},{filters:t})};function ce(){var e=(0,c.useState)(window.innerWidth),t=(0,a.A)(e,2),r=t[0],o=t[1],i=(0,c.useState)(window.innerHeight),s=(0,a.A)(i,2),p=s[0],v=s[1];(0,c.useEffect)((function(){var e=function(){o(window.innerWidth),v(window.innerHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var y=function(){var e=(0,n.A)(l().mark((function e(t,r,n,a){var o,i,c,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(r),c=n.map((function(e){return ae(ae({},e),{},{field:ie[e.field]||e.field})})),(null===(o=c)||void 0===o?void 0:o.length)>0||(c=[{field:"date_created",dir:"desc"}]),e.next=6,m.R.search(t.currentPage,t.pageSize,i,c,a,!0);case 6:return u=e.sent,s=u.data.map(b.Bl),console.log("Adapted Data: ",s),e.abrupt("return",{data:s,meta:{total:u.meta.total}});case 10:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),g=function(e,t,r,n,a){var o=void 0;"create"===e?o=m.R.createResource(t):"edit"===e?o=m.R.updateResource(n,t):"delete"===e&&(o=m.R.deleteResource(n)),o&&o.then((function(){d().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo"),r(),a()})).catch((function(e){console.error("Error during form submission:",e)}))};return u().createElement(f(),{writePermissions:["WRITE_SALES_OFFER"],filterable:!0,sortable:!0,getData:y,columns:oe,pageable:!0,resizableWindow:!0,initialHeightWindow:p,initialWidthWindow:r,resizable:!0,addedFilters:[{name:"accountManager_id",label:"Commerciale",type:"filter-autocomplete",indexPosition:1,options:{getData:function(e){return Promise.resolve(_.L.searchCommerciale(e).then((function(e){return e?e.map((function(e){return{id:e.id,name:"".concat(e.Person.firstName," ").concat(e.Person.lastName," (").concat(e.email,")")}})):[]})))},getValue:function(e){return null==e?void 0:e.id}}},{name:"Project.Activities.PersonActivities.person_id",label:"Dipendente assegnato",type:"filter-autocomplete",options:{getData:function(e){return Promise.resolve(_.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:"".concat(e.firstName," ").concat(e.lastName," (").concat(e.email,")")}})):[]})))},getValue:function(e){return null==e?void 0:e.id}}}],actions:function(e){var t=["create"];return null!=e&&e.thereisProject?t.push("show","edit"):t.push("show","edit","delete"),t},formCrud:function(e,t,r,n){return u().createElement(u().Fragment,null,u().createElement(re,{row:e,type:t,closeModalCallback:r,refreshTable:n,onSubmit:g}))}})}},2923:(e,t,r)=>{r.d(t,{A:()=>Xe});var n=r(8557),a=r(2816),o=r(7255),i=r(2207),l=r.n(i),c=r(4914),u=r.n(c),s=r(9029),d=r.n(s),p=r(6531),f=r(1315),m=r(7136),b=r(8733),v=r.n(b),y=r(9542),g=r(6752),h=r(8697),A=r(3509),w=r(2644),O=r(9322),E=r.n(O),S=r(1178),j=r.n(S);function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var C=new(function(e){function t(){var e,r,n,o;(0,y.A)(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return r=this,n=t,o=[].concat(c),n=(0,A.A)(n),e=(0,h.A)(r,x()?Reflect.construct(n,o||[],(0,A.A)(r).constructor):n.apply(r,o)),(0,m.A)(e,"getProjectByCustomer",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={pageNum:r,pageSize:n,include:a},e.next=4,j().post("api/v1/projects/findByCustomer/".concat(t),{filtering:o,sorting:i},{params:c});case 4:return u=e.sent,e.abrupt("return",u.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"getProjectWorkedDays",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a){var o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageNum:r,pageSize:n,include:a},e.next=3,j().get("api/v1/projects/getWorkedDays/".concat(t),{params:o});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}()),(0,m.A)(e,"getProjectById",function(){var e=(0,a.A)(l().mark((function e(t,r){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={include:r},e.next=3,j().get("api/v1/projects/".concat(t),{params:n});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,m.A)(e,"getGridModel",(0,a.A)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,j().get("api/v1/projects/models",{params:t});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))),(0,m.A)(e,"getProjectExpensesCreateDtoModel",(0,a.A)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().get("api/v1/projectExpenses/dtoModels/create",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),(0,m.A)(e,"getCreateDTOModel",(0,a.A)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().get("api/v1/projects/dtoModels/create",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),(0,m.A)(e,"getUpdateDTOModel",(0,a.A)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().get("api/v1/projects/dtoModels/update",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),(0,m.A)(e,"deleteProject",function(){var e=(0,a.A)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().delete("api/v1/projects/delete/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,m.A)(e,"getExpensesByProjectId",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={pageNum:r,pageSize:n,include:a},e.next=3,j().post("/api/v1/projectExpenses/find/".concat(t),{filtering:o,sorting:i},{params:c});case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"getProjectExpensesTypes",(function(e){return j().get("api/v1/projectExpenses/getExpenseTypes?term=".concat(e)).then((function(e){return e.data}))})),(0,m.A)(e,"createProjectExpense",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[{project_id:t,description:r,amount:n,payment_date:a,projectExpensesType_id:o,Attachment:i}],e.next=3,j().post("api/v1/projectExpenses/create/".concat(t),c,{});case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"updateProjectExpense",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[{id:t,description:r,amount:n,payment_date:a,projectExpensesType_id:o,Attachment:i}],e.next=3,j().patch("api/v1/projectExpenses/update",c,{});case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"deleteProjectExpense",function(){var e=(0,a.A)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().delete("/api/v1/projectExpenses/delete/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e}return(0,w.A)(t,e),(0,g.A)(t,[{key:"getTableName",value:function(){return"projects"}}])}(E())),k=r(8539),P=r.n(k),_=r(8500),D=r.n(_);function I(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var B=[{key:"AccountManager",label:"Commerciale",type:"string",sortable:!0,filter:"text"},{key:"offer_name",label:"Titolo offerta",type:"string",sortable:!0,filter:"text"},{key:"start_date",label:"Data inizio",type:"date",sortable:!0,filter:"date"},{key:"end_date",label:"Data fine",type:"date",sortable:!0,filter:"date"},{key:"amount",label:"Importo",type:"custom",sortable:!0,filter:"text",render:function(e){return c.createElement("td",null,I(e.amount))}},{key:"sal_total",label:"Sal",type:"custom",sortable:!0,filter:"text",render:function(e){return c.createElement("td",null,I(e.sal_total))}},{key:"bill_total",label:"Sal Fatturato",type:"custom",sortable:!0,filter:"text",render:function(e){return c.createElement("td",null,I(e.bill_total))}}],N=[{key:"description",label:"Descrizione",type:"string",sortable:!1,filter:"text"},{key:"start_date",label:"Data inizio",type:"date",sortable:!0,filter:"date"},{key:"end_date",label:"Data fine",type:"date",sortable:!0,filter:"date"},{key:"ActivityType.description",label:"Tipo",type:"string",sortable:!1,filter:"text"}],F=[{key:"Person.firstName",label:"Nome",type:"string",sortable:!1,filter:"text"},{key:"Person.lastName",label:"Cognome",type:"string",sortable:!1,filter:"text"},{key:"start_date",label:"Data inizio",type:"date",sortable:!0,filter:"date"},{key:"end_date",label:"Data fine",type:"date",sortable:!0,filter:"date"},{key:"expectedDays",label:"Giorni previsti",type:"int",sortable:!0,filter:"numeric"}],T=[{key:"description",label:"Descrizione",type:"string",sortable:!1,filter:"text"},{key:"amount",label:"Importo",type:"string",sortable:!0,filter:"text"},{key:"payment_date",label:"Data pagamento",type:"date",sortable:!0,filter:"date"},{key:"ProjectExpensesType.description",label:"Tipo",type:"string",sortable:!1,filter:"text"}],z=r(2659),L=r(7026),R=r.n(L),M=r(8734),W=r.n(M),q=r(3558),Q={"offerte-selector":R()(W()((function(e){return q.R.searchOfferte(e).then((function(e){return e&&e.data?e.data.map((function(e){return{id:e.id,name:e.name}})):[]}))}))),"offerta-form":function(e){return u().createElement(u().Fragment,null,u().createElement("div",{className:"k-form-field"},u().createElement("label",{className:"k-label"},"Offerta di riferimento"),u().createElement("input",{type:"text",value:e.value.name,disabled:!0,className:"k-input k-input-md k-rounded-md k-input-solid"})),u().createElement("div",{className:"k-form-field"},u().createElement("label",{className:"k-label"},"Cliente"),u().createElement("input",{type:"text",value:e.value.Customer.name,disabled:!0,className:"k-input k-input-md k-rounded-md k-input-solid"})),u().createElement("div",{className:"k-form-field"},u().createElement("label",{className:"k-label"},"Tipo Offerta"),u().createElement("input",{type:"text",value:e.value.ProjectType.description,disabled:!0,className:"k-input k-input-md k-rounded-md k-input-solid"})),u().createElement("div",{className:"k-form-field"},u().createElement("label",{className:"k-label"},"Anno Competenza"),u().createElement("input",{type:"text",value:e.value.year,disabled:!0,className:"k-input k-input-md k-rounded-md k-input-solid"})),e.value.approval_date&&u().createElement("div",{className:"k-form-field"},u().createElement("label",{className:"k-label"},"Data approazione offerta"),u().createElement("input",{type:"text",value:new Date(e.value.approval_date).toLocaleDateString(),disabled:!0,className:"k-input k-input-md k-rounded-md k-input-solid"})),u().createElement("div",{className:"k-form-field"},u().createElement("label",{className:"k-label"},"Giorni Offerta"),u().createElement("input",{type:"text",value:e.value.days,disabled:!0,className:"k-input k-input-md k-rounded-md k-input-solid"})))}},G=r(5072),H=r.n(G),V=r(7825),K=r.n(V),U=r(7659),Y=r.n(U),Z=r(5056),J=r.n(Z),X=r(540),$=r.n(X),ee=r(1113),te=r.n(ee),re=r(3442),ne={};ne.styleTagTransform=te(),ne.setAttributes=J(),ne.insert=Y().bind(null,"head"),ne.domAPI=K(),ne.insertStyleElement=$(),H()(re.A,ne);const ae=re.A&&re.A.locals?re.A.locals:void 0;var oe=r(8392),ie={};ie.styleTagTransform=te(),ie.setAttributes=J(),ie.insert=Y().bind(null,"head"),ie.domAPI=K(),ie.insertStyleElement=$(),H()(oe.A,ie);const le=oe.A&&oe.A.locals?oe.A.locals:void 0;function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const se=function(e){var t=(0,c.useState)(void 0),r=(0,o.A)(t,2),n=r[0],a=r[1];return(0,c.useEffect)((function(){C.getProjectWorkedDays(e.dataItem.id).then((function(t){C.getProjectById(e.dataItem.id,!0).then((function(e){return a(ue(ue({},e),{},{workedDays:t}))}))}))}),[]),u().createElement("div",{className:le.form},u().createElement("h3",null,"Dettagli per ",e.dataItem.offer_name),n?u().createElement(v(),{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:20},submitText:"Salva",customDisabled:!1,formData:ue(ue({},n),{},{offer_id:{id:n.offer_id,name:n.Offer.name}}),fields:Object.values(e.fields).filter((function(e){return!("amount"===e.name&&"LumpSum"!==n.Offer.ProjectType.billing_type||"rate"===e.name&&"Daily"!==n.Offer.ProjectType.billing_type)})),addedFields:e.addedFields,showSubmit:!0,extraButton:!0,extraBtnAction:e.closeModal,onSubmit:function(t){e.handleFormSubmit(t,e.refreshTable,t.id,e.closeModal,!1)}}):null)};function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}var pe=new(function(e){function t(){var e,r,n,o;(0,y.A)(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return r=this,n=t,o=[].concat(c),n=(0,A.A)(n),e=(0,h.A)(r,de()?Reflect.construct(n,o||[],(0,A.A)(r).constructor):n.apply(r,o)),(0,m.A)(e,"getGridModel",(0,a.A)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},e.next=4,j().get("api/v1/activities/models",{params:t});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),(0,m.A)(e,"getAssignGridModel",(0,a.A)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},e.next=4,j().get("api/v1/crud/personactivity/models",{params:t});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),(0,m.A)(e,"getActivityById",function(){var e=(0,a.A)(l().mark((function e(t,r){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().get("api/v1/activities/".concat(t,"?include=true"));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,m.A)(e,"getActivitiesByProject",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={pageNum:r,pageSize:n,include:a},e.next=4,j().post("api/v1/activities/getByProject/".concat(t),{filtering:o,sorting:i},{params:c});case 4:return u=e.sent,e.abrupt("return",u.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"getRelatedPersonActivities",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={pageNum:r,pageSize:n,include:a},e.next=4,j().post("api/v1/activities/getRelatedPersonActivities/".concat(t),{filtering:o,sorting:i},{params:c});case 4:return u=e.sent,e.abrupt("return",u.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"deleteActivity",function(){var e=(0,a.A)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().delete("api/v1/activities/delete/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),(0,m.A)(e,"getActivityTypes",(0,a.A)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().get("api/v1/activities/getActivityTypes");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))),(0,m.A)(e,"addEmployee",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o){var i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={person_id:t,activity_id:r,start_date:n,end_date:a,expectedDays:o},e.next=4,j().post("api/v1/activities/addEmployee",i,{});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}()),(0,m.A)(e,"updateEmployee",function(){var e=(0,a.A)(l().mark((function e(t,r,n,a,o,i){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={person_id:t,activity_id:r,start_date:n,end_date:a,expectedDays:o,person_activity_id:i},e.prev=1,e.next=4,j().patch("api/v1/activities/updateEmployee",c);case 4:return u=e.sent,e.abrupt("return",u.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Error updating resource:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,m.A)(e,"removeEmployee",function(){var e=(0,a.A)(l().mark((function e(t,r,n){var a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={person_id:t,activity_id:r,person_activity_id:n},e.prev=1,e.next=4,j().delete("api/v1/activities/removeEmployee",{data:a});case 4:return o=e.sent,e.abrupt("return",o.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()),e}return(0,w.A)(t,e),(0,g.A)(t,[{key:"getTableName",value:function(){return"activities"}}])}(E())),fe={"manager-selector":R()(W()((function(e){return f.L.searchCommerciale(e).then((function(e){return e?e.map((function(e){return{id:e.id,name:"".concat(e.Person.firstName," ").concat(e.Person.lastName," (").concat(e.email,")")}})):[]}))}))),"activity-type-selector":R()(W()((function(){return pe.getActivityTypes().then((function(e){return e?e.map((function(e){return{id:e.id,name:e.description}})):[]}))})))},me=r(7250),be={};be.styleTagTransform=te(),be.setAttributes=J(),be.insert=Y().bind(null,"head"),be.domAPI=K(),be.insertStyleElement=$(),H()(me.A,be);const ve=me.A&&me.A.locals?me.A.locals:void 0;function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const he=function(e){var t=(0,c.useState)(void 0),r=(0,o.A)(t,2),n=r[0],a=r[1];return(0,c.useEffect)((function(){pe.getActivityById(e.dataItem.id,!0).then((function(e){var t;a(ge(ge({},e),{},{activityType_id:{id:e.activityType_id,name:(null===(t=e.ActivityType)||void 0===t?void 0:t.description)||""},activityManager_id:{id:e.activityManager_id,name:e.ActivityManager.Person.firstName+" "+e.ActivityManager.Person.lastName}}))}))}),[]),u().createElement("div",null,u().createElement("h3",null,"Dettagli per ",e.dataItem.description),n?u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:n,fields:Object.values(e.fields),addedFields:e.addedFields,showSubmit:!0,extraButton:!0,extraBtnAction:e.closeModal,onSubmit:function(t){e.handleFormSubmit(t,e.refreshTable,e.closeModal,!0)}}):null)};var Ae=r(98),we=r.n(Ae),Oe={"account-selector":R()(W()((function(e){return f.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:e.firstName+" "+e.lastName}})):[]}))})))},Ee=r(3061),Se={};Se.styleTagTransform=te(),Se.setAttributes=J(),Se.insert=Y().bind(null,"head"),Se.domAPI=K(),Se.insertStyleElement=$(),H()(Ee.A,Se);const je=Ee.A&&Ee.A.locals?Ee.A.locals:void 0;function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ke=function(e){var t=(0,c.useState)(void 0),r=(0,o.A)(t,2),n=r[0],a=r[1];return(0,c.useEffect)((function(){e.dataItem&&a(Ce(Ce({},e.dataItem),{},{person_id:{id:e.dataItem.Person.id,name:e.dataItem.Person.firstName+" "+e.dataItem.Person.lastName}}))}),[e.dataItem]),u().createElement("div",null,u().createElement("h3",null,"Dettagli per ",n?n.Person.firstName+" "+n.Person.lastName:""),n?u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:n,fields:Object.values(e.fields).filter((function(e){return"id"!==e.name})).map((function(e){return Ce(Ce({},e),{},{disabled:"person_id"===e.name||"activity_id"===e.name})})),addedFields:e.addedFields,showSubmit:!0,extraButton:!0,extraBtnAction:e.closeModal,onSubmit:function(t){e.handleFormSubmit(t,e.refreshTable,e.closeModal,!0)}}):null)};var Pe={"account-selector":{name:"person_id",type:"account-selector",label:"Impiegato",value:"",disabled:!1,required:!0,options:[],showLabel:!0},start_date:{name:"start_date",type:"date",label:"Data inizio",value:"",disabled:!1,required:!0,options:[],showLabel:!0},end_date:{name:"end_date",type:"date",label:"Data fine",value:"",disabled:!1,required:!0,options:[],showLabel:!0},expectedDays:{name:"expectedDays",type:"number",label:"Giorni stimati",value:"",disabled:!1,required:!1,options:[],showLabel:!0}};function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ie=function(e){var t=function(){var t=(0,a.A)(l().mark((function t(r,n,a){var o,i,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return JSON.parse(JSON.stringify(n)),t.next=4,pe.getRelatedPersonActivities(e.activity_id,r.currentPage,r.pageSize,!0,n,a);case 4:return i=t.sent,c=null==i?void 0:i.data.map((function(e){return De(De({},e),{},{fullName:e.Person.firstName+" "+e.Person.lastName})})),t.abrupt("return",{data:c,meta:{total:null==i||null===(o=i.meta)||void 0===o?void 0:o.total}});case 7:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),r=function(e,t,r,n){var a=void 0;(a=n?pe.addEmployee(e.person_id.id,e.activity_id,e.start_date.toISOString?e.start_date.toISOString():e.start_date,e.end_date.toISOString?e.end_date.toISOString():e.end_date,parseInt(e.expectedDays)):pe.updateEmployee(e.person_id.id,e.activity_id,e.start_date.toISOString?e.start_date.toISOString():e.start_date,e.end_date.toISOString?e.end_date.toISOString():e.end_date,parseInt(e.expectedDays),e.id))&&a.then((function(){D().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo"),t(),r()}))};return u().createElement(d(),{filterable:!0,pageable:!0,sortable:!0,getData:t,columns:F,createLabel:"Nuova assegnazione",resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return["create"]},formCrud:function(t,n,a,o){return u().createElement("div",null,u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:{activity_id:e.activity_id},fields:Object.values(Pe),addedFields:Oe,showSubmit:!0,extraButton:!0,extraBtnAction:a,onSubmit:function(e){r(e,o,a,!0)}}))},customRowActions:[{icon:z.calendarIcon,tooltip:"Rapportino",modalContent:function(e,t,r){return u().createElement(we(),{forcePerson:{id:e.person_id,name:""}})}},{icon:z.detailSectionIcon,tooltip:"Modifica",modalContent:function(e,t,n){return u().createElement(ke,{dataItem:e,closeModal:t,refreshTable:n,addedFields:Oe,fields:Pe,handleFormSubmit:function(e,t,n){return r(e,t,n,!1)}})}},{icon:z.trashIcon,tooltip:"Elimina",modalContent:function(e,t,r){return u().createElement("div",null,"L'operazione è irreversibile.",u().createElement("div",{className:je.buttonsContainer},u().createElement(P(),{onClick:function(){return t()}},"Annulla"),u().createElement(P(),{themeColor:"error",onClick:(0,a.A)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,pe.removeEmployee(e.person_id,e.activity_id,e.id);case 2:r(),t();case 4:case"end":return n.stop()}}),n)})))},"Elimina")))}}]})};var Be={"manager-selector":{name:"activityManager_id",type:"manager-selector",label:"Responsabile",value:"",disabled:!1,required:!1,options:[],showLabel:!0,readOnly:!1},"activity-type-selector":{name:"activityType_id",type:"activity-type-selector",label:"Tipo attività",value:"",disabled:!1,required:!0,options:[],showLabel:!0,readOnly:!1},description:{name:"description",type:"text",label:"Descrizione",value:"",disabled:!1,required:!0,options:[],showLabel:!0,readOnly:!1},start_date:{name:"start_date",type:"date",label:"Data inizio",value:"",disabled:!1,required:!0,options:[],showLabel:!0,readOnly:!1},end_date:{name:"end_date",type:"date",label:"Data fine",value:"",disabled:!1,required:!0,options:[],showLabel:!0,readOnly:!1}};function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Te=function(e){var t=function(){var t=(0,a.A)(l().mark((function t(r,n,a){var o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.getActivitiesByProject(e.dataItem.id,r.currentPage,r.pageSize,!0,n,a);case 2:return i=t.sent,t.abrupt("return",{data:null==i?void 0:i.data,meta:{total:null==i||null===(o=i.meta)||void 0===o?void 0:o.total}});case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),r=function(e,t,r,n){n?pe.updateResource(e.id,Fe(Fe({},e),{},{activityType_id:e.activityType_id.id,activityManager_id:e.activityManager_id.id})).then((function(e){e&&(r(),t())})):pe.createResource(Fe(Fe({},e),{},{activityType_id:e.activityType_id.id,activityManager_id:e.activityManager_id.id})).then((function(e){e&&(r(),t())}))};return u().createElement(d(),{expand:{enabled:!0,render:function(e){return u().createElement(Ie,{activity_id:e.dataItem.id})}},filterable:!0,sortable:!0,createLabel:"Nuova attività",getData:t,columns:N,resizableWindow:!0,draggableWindow:!0,initialHeightWindow:800,initialWidthWindow:900,resizable:!0,pageable:!0,actions:function(){return["create"]},formCrud:function(t,n,a,o){return u().createElement("div",null,u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:t,fields:Object.values(Be),addedFields:fe,showSubmit:!0,extraButton:!0,extraBtnAction:a,onSubmit:function(t){r(Fe(Fe({},t),{},{project_id:e.dataItem.id}),o,a)}}))},customRowActions:[{icon:z.detailSectionIcon,tooltip:"Modifica",modalContent:function(e,t,n){return u().createElement(he,{dataItem:e,closeModal:t,refreshTable:n,addedFields:fe,fields:Be,handleFormSubmit:function(e,t,n){return r(e,t,n,!0)}})}},{icon:z.trashIcon,tooltip:"Elimina",modalContent:function(e,t,r){return u().createElement("div",null,"L'operazione è irreversibile.",u().createElement("div",{className:ve.buttonsContainer},u().createElement(P(),{onClick:function(){return t()}},"Annulla"),u().createElement(P(),{themeColor:"error",onClick:(0,a.A)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,pe.deleteActivity(e.id);case 2:r(),t();case 4:case"end":return n.stop()}}),n)})))},"Elimina")))}}]})};var ze=r(4426),Le={};Le.styleTagTransform=te(),Le.setAttributes=J(),Le.insert=Y().bind(null,"head"),Le.domAPI=K(),Le.insertStyleElement=$(),H()(ze.A,Le);const Re=ze.A&&ze.A.locals?ze.A.locals:void 0;function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const qe=function(e){var t,r,n=(0,c.useState)(void 0),a=(0,o.A)(n,2),i=a[0],l=a[1];return(0,c.useEffect)((function(){l(We(We({},e.dataItem),{},{projectExpensesType_id:{id:e.dataItem.projectExpensesType_id,name:e.dataItem.ProjectExpensesType.description}}))}),[]),u().createElement("div",null,u().createElement("h3",null,"Dettagli per ",e.dataItem.description),i?u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:i,fields:(t=Object.values(e.fields),r=e.dataItem.file,t.map((function(e){return"file"===e.name&&r&&(e.existingFile=[{name:r.file_name,id:r.uniqueIdentifier}]),e}))),addedFields:e.addedFields,showSubmit:!0,extraButton:!0,extraBtnAction:e.closeModal,onSubmit:function(t){e.handleFormSubmit(t,e.refreshTable,e.closeModal,!0)}}):null)};var Qe={"project-type-selector":R()(W()((function(e){return C.getProjectExpensesTypes(e).then((function(e){return e?e.map((function(e){return{id:e.id,name:e.description}})):[]}))})))};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ve=function(e){var t=(0,c.useState)({}),r=(0,o.A)(t,2),n=r[0],i=r[1],s=function(){var e=(0,a.A)(l().mark((function e(){var t,r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getProjectExpensesCreateDtoModel();case 3:if(t=e.sent){e.next=6;break}throw new Error("No resources found");case 6:r={},n=new Map([["description","Descrizione"],["amount","Importo"],["payment_date","Data pagamento"],["projectExpensesType_id","Tipologia spesa"],["Attachment","Allegato"]]),t.forEach((function(e){var t,a="projectExpensesType_id"===e.name?"project-type-selector":"Attachment"===e.name?"file":e.name;r[a]={name:"Attachment"===e.name?"file":e.name,type:"projectExpensesType_id"===e.name?"project-type-selector":"Attachment"===e.name?"uploadSingleFile":(t=e.type,"boolean"===t.toLocaleLowerCase()?"checkbox":"number"===t.toLocaleLowerCase()||"float"===t.toLocaleLowerCase()||"int"===t.toLocaleLowerCase()?"number":"string"===t.toLocaleLowerCase()?t.toLocaleLowerCase().includes("@")?"email":"text":"date"===t.toLocaleLowerCase()||"datetime"===t.toLocaleLowerCase()?"date":"projectstate"===t.toLocaleLowerCase()?"select":"text"),label:n.get(e.name)||e.name,value:"",disabled:e.readOnly,required:e.required,options:[],showLabel:!0,readOnly:e.readOnly}})),i(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error loading fields:",e.t0),i({});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){s()}),[]);var p=function(){var t=(0,a.A)(l().mark((function t(r,n,a){var o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getExpensesByProjectId(e.dataItem.id,r.currentPage,r.pageSize,!0,n,a);case 2:return i=t.sent,t.abrupt("return",{data:null==i?void 0:i.data,meta:{total:null==i||null===(o=i.meta)||void 0===o?void 0:o.total}});case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),f=function(t,r,n,a){a?C.updateProjectExpense(t.id,t.description,parseInt(t.amount),t.payment_date,t.projectExpensesType_id.id,t.file).then((function(e){e&&(n(),r())})):C.createProjectExpense(e.dataItem.id,t.description,parseInt(t.amount),t.payment_date,t.projectExpensesType_id.id,t.file).then((function(e){e&&(n(),r())}))};return u().createElement(d(),{filterable:!0,sortable:!0,getData:p,columns:T,resizableWindow:!0,draggableWindow:!0,initialHeightWindow:800,initialWidthWindow:900,resizable:!0,pageable:!0,actions:function(){return["create"]},formCrud:function(t,r,a,o){return u().createElement("div",null,u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:{project_id:e.dataItem.id},fields:Object.values(n).filter((function(e){return!(e.readOnly||"id"===e.name)})).map((function(e){return He(He({},e),{},{disabled:"project_id"===e.name})})),showSubmit:!0,extraButton:!0,extraBtnAction:a,onSubmit:function(e){f(e,o,a)},addedFields:Qe}))},customRowActions:[{icon:z.detailSectionIcon,tooltip:"Modifica",modalContent:function(e,t,r){return u().createElement(qe,{dataItem:e,closeModal:t,refreshTable:r,fields:Object.values(n).map((function(t){return He(He({},t),{},{existingFile:"files"===t.name&&e.files&&e.files.length?e.files.map((function(e){return{name:e.file_name,id:t.uniqueIdentifier}})):void 0})})),addedFields:Qe,handleFormSubmit:function(e,t,r){return f(e,t,r,!0)}})}},{icon:z.trashIcon,tooltip:"Elimina",modalContent:function(e,t,r){return u().createElement("div",null,"L'operazione è irreversibile.",u().createElement("div",{className:Re.buttonsContainer},u().createElement(P(),{onClick:function(){return t()}},"Annulla"),u().createElement(P(),{themeColor:"error",onClick:(0,a.A)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.deleteProjectExpense(e.id);case 2:r(),t();case 4:case"end":return n.stop()}}),n)})))},"Elimina")))}}]})};var Ke={Offer:{name:"Offer",type:"offerta-form",noContainer:!0},workedDays:{name:"workedDays",type:"number",label:"Giorni lavorati",value:"",required:!1,options:[],showLabel:!0,disabled:!0},ProjectState:{name:"ProjectState",type:"select",label:"Stato",value:"",required:!0,options:["OPEN","CLOSED","INPROGRESS"],showLabel:!1},start_date:{name:"start_date",type:"date",label:"Data inizio",value:"",required:!0,options:[],showLabel:!0},end_date:{name:"end_date",type:"date",label:"Data fine",value:"",required:!1,options:[],showLabel:!0},rate:{name:"rate",type:"number",label:"Tariffa",value:"",required:!1,options:[],showLabel:!0},amount:{name:"amount",type:"number",label:"Importo",value:"",required:!1,options:[],showLabel:!0},orderNum:{name:"orderNum",type:"text",label:"Numero Ordine",value:"",required:!1,options:[],showLabel:!0},waitingForOrder:{name:"waitingForOrder",type:"checkbox",label:"In attesa dell'ordine",value:"",required:!1,options:[],showLabel:!1}};function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const Ye=function(e){var t=(0,c.useState)(),r=(0,o.A)(t,2),n=r[0],i=r[1],s=function(){var t=(0,a.A)(l().mark((function t(r,a,o){var i,c,u,s,d,p,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=JSON.parse(JSON.stringify(a)),u=new Date,s=[{field:"start_date",value:new Date(u.getFullYear()-1,0).toISOString(),operator:"gte"},{field:"start_date",value:new Date(u.getFullYear(),12).toISOString(),operator:"lt"}],c?c.filters.some((function(e){return"start_date"===e.field}))||(c.logic="and",(d=c.filters).push.apply(d,s)):c={logic:"and",filters:[].concat(s)},e.currentFilter&&(null===(i=e.currentFilter.filters)||void 0===i?void 0:i.length)>0&&!n&&(p=e.currentFilter.filters.find((function(e){return"person_id"===e.field})),p&&c.filters.push(p)),t.next=8,C.getProjectByCustomer(e.customer,r.currentPage,r.pageSize,!0,c,o);case 8:return f=t.sent,t.abrupt("return",{data:null==f?void 0:f.data,meta:null==f?void 0:f.meta});case 10:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),p=function(e,t,r,n,a){var o,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){(0,m.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);i.offer_id=null===(o=i.offer_id)||void 0===o?void 0:o.id,i.rate&&(i.rate=parseInt(i.rate)),i.amount&&(i.amount=parseInt(i.amount)),i.workedDays&&(i.workedDays=parseInt(e.Offer.days));var l=void 0;(l=a?C.createResource(i):C.updateResource(r,i))&&l.then((function(){D().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo"),t(),n()}))};return u().createElement(d(),{filterable:!0,pageable:!0,sortable:!0,sorting:[{field:"start_date",dir:"desc"}],getData:s,columns:B,onFilterSubmit:function(){return i(!0)},addedFilters:[{name:"person_id",label:"Dipendente assegnato",type:"filter-autocomplete",options:{getData:function(e){return Promise.resolve(f.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:"".concat(e.firstName," ").concat(e.lastName," (").concat(e.email,")")}})):[]})))},getValue:function(e){return null==e?void 0:e.id}}}],resizableWindow:!0,initialHeightWindow:1e3,draggableWindow:!0,initialWidthWindow:1200,resizable:!0,actions:function(){return[]},formCrud:function(e,t,r,n){return u().createElement("div",null,u().createElement(v(),{submitText:"Salva",customDisabled:!1,formData:e,fields:Object.values(Ke),addedFields:Q,showSubmit:!0,extraButton:!0,extraBtnAction:r,onSubmit:function(e){p(e,n,e.id,r,!0)}}))},customRowActions:[{icon:z.detailSectionIcon,tooltip:"Dati Ordine",modalContent:function(e,t,r){return u().createElement(se,{dataItem:e,closeModal:t,refreshTable:r,addedFields:Q,fields:Ke,handleFormSubmit:p})}},{icon:z.rowsIcon,tooltip:"Attività",modalContent:function(e,t,r){return u().createElement(Te,{dataItem:e,closeModal:t,refreshTable:r,handleFormSubmit:p})}},{icon:z.bookIcon,tooltip:"Costi Commessa",modalContent:function(e,t,r){return u().createElement(Ve,{dataItem:e,closeModal:t,refreshTable:r,handleFormSubmit:p})}},{icon:z.trashIcon,tooltip:"Elimina",modalContent:function(e,t,r){return u().createElement("div",null,"L'operazione è irreversibile.",u().createElement("div",{className:ae.buttonsContainer},u().createElement(P(),{onClick:function(){return t()}},"Annulla"),u().createElement(P(),{themeColor:"error",onClick:(0,a.A)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.deleteProject(e.id);case 2:r(),t();case 4:case"end":return n.stop()}}),n)})))},"Elimina")))}}]})};function Ze(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var Je=[{key:"name",label:"Cliente",type:"string",sortable:!0,filter:"text"},{key:"amount_total",label:"Totale importo",type:"custom",sortable:!0,filter:"text",render:function(e){return c.createElement("td",null,Ze(e.amount_total))}},{key:"sal_total",label:"Totale Sal",type:"custom",sortable:!0,filter:"text",render:function(e){return c.createElement("td",null,Ze(e.sal_total))}},{key:"bill_total",label:"Totale Sal Fatturato",type:"custom",sortable:!0,filter:"text",render:function(e){return c.createElement("td",null,Ze(e.bill_total))}}];function Xe(){var e=(0,c.useState)(),t=(0,o.A)(e,2),r=t[0],i=t[1],s=[{name:"fromYear",label:"Anno da",type:"number"},{name:"toYear",label:"Anno a",type:"number"}],m=function(){var e=(0,a.A)(l().mark((function e(t,r,a){var o,c,u,d,f,m,b;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=s.map((function(e){return e.name})),d=((null===(o=r)||void 0===o?void 0:o.filters)||[]).map((function(e){return e.field})),u.some((function(e){return d.includes(e)}))||(f=new Date,m=[{field:"fromYear",operator:"eq",value:f.getFullYear()-1},{field:"toYear",operator:"eq",value:f.getFullYear()}],r||(r={}),r.logic="AND",r.filters=[].concat((0,n.A)(r.filters||[]),m)),e.next=5,p.m.getHasProject(t.currentPage,t.pageSize,r,a,void 0,!0);case 5:return b=e.sent,i(r),e.abrupt("return",{data:null==b?void 0:b.data,meta:{total:null==b||null===(c=b.meta)||void 0===c?void 0:c.total}});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return u().createElement(d(),{writePermissions:["WRITE_SALES_PROJECT"],expand:{enabled:!0,render:function(e){return u().createElement(Ye,{customer:e.dataItem.id,currentFilter:r})}},filterable:!0,sortable:!0,getData:m,columns:Je,addedFilters:[].concat(s,[{name:"person_id",label:"Dipendente assegnato",type:"filter-autocomplete",options:{getData:function(e){return Promise.resolve(f.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:"".concat(e.firstName," ").concat(e.lastName," (").concat(e.email,")")}})):[]})))},getValue:function(e){return null==e?void 0:e.id}}}]),resizableWindow:!0,draggableWindow:!0,initialHeightWindow:800,initialWidthWindow:900,resizable:!0,pageable:!0})}},3215:(e,t,r)=>{r.d(t,{A:()=>qe});var n=r(7255),a=r(4914),o=r.n(a),i=r(4540),l=r.n(i),c=r(7136),u=r(2816),s=r(2207),d=r.n(s),p=r(9542),f=r(6752),m=r(8697),b=r(3509),v=r(2644),y=r(9322),g=r.n(y),h=r(1178),A=r.n(h);function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var O=new(function(e){function t(){var e,r,n,a;(0,p.A)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return r=this,n=t,a=[].concat(i),n=(0,b.A)(n),e=(0,m.A)(r,w()?Reflect.construct(n,a||[],(0,b.A)(r).constructor):n.apply(r,a)),(0,c.A)(e,"getGridModel",(0,u.A)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},e.next=4,A().get("api/v1/sal/models",{params:t});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),(0,c.A)(e,"findSal",function(){var e=(0,u.A)(d().mark((function e(t,r,n,a,o){var i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={pageNum:t,pageSize:r,include:o},e.next=4,A().post("api/v1/sal/findSal",{filtering:n,sorting:a},{params:i});case 4:return l=e.sent,e.abrupt("return",l.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}()),(0,c.A)(e,"getSal",function(){var e=(0,u.A)(d().mark((function e(t,r,n){var a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={pageNum:t,pageSize:r,include:n},e.next=4,A().get("api/v1/sal/",{params:a});case 4:return o=e.sent,e.abrupt("return",o.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,c.A)(e,"getSalByProject",function(){var e=(0,u.A)(d().mark((function e(t,r,n,a,o,i){var l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={pageNum:r,pageSize:n,include:i},e.next=3,A().post("api/v1/sal/getSalFromProject/".concat(t),{filtering:a,sorting:o},{params:l});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,c.A)(e,"getSalFromProject",function(){var e=(0,u.A)(d().mark((function e(t,r,n,a,o,i){var l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={pageNum:r,pageSize:n,include:i},e.next=3,A().post("api/v1/sal/getSalFromProject/".concat(t),{filtering:{other_filters:a},sorting:o},{params:l});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,c.A)(e,"getSalRTBFromProject",function(){var e=(0,u.A)(d().mark((function e(t,r,n,a,o,i){var l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={pageNum:r,pageSize:n,include:i},e.next=3,A().post("api/v1/bills/getReadyToBillFromProject/".concat(t),{filtering:{other_filters:a},sorting:o},{params:l});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,c.A)(e,"getCustomersWithSal",(function(t,r,n,a,o){var i={pageNum:t,pageSize:r,include:o};return A().post("/api/v1/sal/draftsByCustomer",{filtering:e.transformFilters(n),sorting:a},{params:i}).then((function(e){return e.data}))})),(0,c.A)(e,"getProjectsWithSal",(function(e,t,r,n,a,o){var i={pageNum:t,pageSize:r,include:o};return A().post("/api/v1/sal/draftsByProject/".concat(e),{filtering:{other_filters:n},sorting:a},{params:i}).then((function(e){return e.data}))})),(0,c.A)(e,"getActivitiesWithSal",(function(e,t,r,n,a,o){var i={pageNum:t,pageSize:r,include:o};return A().post("/api/v1/sal/draftsByActivity/".concat(e),{filtering:n,sorting:a},{params:i}).then((function(e){return e.data}))})),(0,c.A)(e,"getAllocationsWithSal",(function(t,r,n,a,o,i){var l={pageNum:r,pageSize:n,include:i};return A().post("/api/v1/sal/draftsByPersonActivity/".concat(t),{filtering:e.transformFilters(a),sorting:o},{params:l}).then((function(e){return e.data}))})),(0,c.A)(e,"getPersonWithSal",(function(e,t,r,n,a,o){var i={pageNum:t,pageSize:r,include:o};return A().post("/api/v1/sal/salByPersonActivity/".concat(e),{filtering:n,sorting:a},{params:i}).then((function(e){return e.data}))})),(0,c.A)(e,"getReadyToBillByCustomer",(function(t,r,n,a,o){var i={pageNum:t,pageSize:r,include:o};return A().post("/api/v1/bills/getReadyToBillByCustomer",{filtering:e.transformFilters(n),sorting:a},{params:i}).then((function(e){return e.data}))})),(0,c.A)(e,"getReadyToBillByProject",(function(e,t,r,n,a,o){var i={pageNum:t,pageSize:r,include:o};return A().post("/api/v1/bills/getReadyToBillByProject/".concat(e),{filtering:{other_filters:n},sorting:a},{params:i}).then((function(e){return e.data}))})),(0,c.A)(e,"getHistoryBillCustomer",function(){var t=(0,u.A)(d().mark((function t(r,n,a,o,i){var l,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l={pageNum:r,pageSize:n,include:i},t.next=3,A().post("/api/v1/bills/getBillByCustomer",{filtering:e.transformFilters(a),sorting:o},{params:l});case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e,r,n,a,o){return t.apply(this,arguments)}}()),(0,c.A)(e,"getHistoryBillFromCustomer",function(){var e=(0,u.A)(d().mark((function e(t,r,n,a,o,i){var l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={pageNum:r,pageSize:n,include:i},e.next=3,A().post("/api/v1/bills/getBillByProject/".concat(t),{filtering:{other_filters:a},sorting:o},{params:l});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,c.A)(e,"getHistoryBillFromProject",function(){var e=(0,u.A)(d().mark((function e(t,r,n,a,o,i){var l,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={pageNum:r,pageSize:n,include:i},a.filters=null==a||null===(l=a.filters)||void 0===l?void 0:l.filter((function(e){return""!==e.value})),e.next=4,A().post("/api/v1/bills/getBillFromProject/".concat(t),{filtering:{other_filters:a},sorting:o},{params:c});case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),(0,c.A)(e,"getSalWorkedDays",(function(e,t,r){return A().get("api/v1/sal/getPersonalWorkedDays",{params:{project_id:e,month:t,year:r}})})),(0,c.A)(e,"createBill",(function(e){return A().post("/api/v1/bills/create",e).then((function(e){return e.data}))})),(0,c.A)(e,"updateBill",function(){var e=(0,u.A)(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A().patch("/api/v1/bills/update/".concat(t),r).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,c.A)(e,"deleteBill",function(){var e=(0,u.A)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A().delete("/api/v1/bills/delete/".concat(t)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e}return(0,v.A)(t,e),(0,f.A)(t,[{key:"getTableName",value:function(){return"sal"}},{key:"searchCustomer",value:function(e){return A().get("api/v1/customers?term=".concat(e)).then((function(e){return e.data.data}))}},{key:"transformFilters",value:function(e){return e&&e.filters&&Array.isArray(e.filters)?e.filters.reduce((function(e,t){return t.field&&void 0!==t.value&&("year"===t.id&&"string"==typeof t.value?e[t.field]=parseInt(t.value):e[t.field]=t.value),e}),{}):null}}])}(g())),E=r(9029),S=r.n(E),j=r(7026),x=r.n(j),C=r(9032),k=r.n(C),P=r(1932),_=r.n(P),D=r(5891),I=r.n(D),B=r(8539),N=r.n(B),F=r(2659),T=r(8386),z=r.n(T),L=r(98),R=r.n(L);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={"yearmonthsal-selector":x()((function(e){return o().createElement(k(),e)})),"moneysal-selector":x()((function(e){var t,r,i,l=(0,a.useState)(),c=(0,n.A)(l,2),u=c[0],s=c[1],d=(0,a.useState)(),p=(0,n.A)(d,2),f=p[0],m=p[1],b=(0,a.useState)(),v=(0,n.A)(b,2),y=v[0],g=v[1],h=(0,a.useState)(null===(t=e.value)||void 0===t?void 0:t.actualDays),A=(0,n.A)(h,2),w=A[0],E=A[1],S=(0,a.useState)(!(null===(r=e.value)||void 0===r||!r.actualDays)),j=(0,n.A)(S,2),x=j[0],C=j[1],k=(0,a.useState)(null===(i=e.value)||void 0===i?void 0:i.amount),P=(0,n.A)(k,2),D=P[0],B=P[1],T=(0,a.useState)(),L=(0,n.A)(T,2),M=L[0],q=L[1];return(0,a.useEffect)((function(){e.options.sal&&e.options.sal.monthyear&&e.options.project&&O.getSalWorkedDays(e.options.project.id,e.options.sal.monthyear.getMonth()+1,e.options.sal.monthyear.getFullYear()).then((function(e){if(e.data){var t=e.data.map((function(e){return W(W({},e.person),{},{detail:e.detail,total:e.detail.reduce((function(e,t){return e+(t.minutes/60+t.hours/8)}),0)})})),r=t.reduce((function(e,t){return e+t.total}),0),n=t.map((function(e){return e.billAcronym}));g(n),s(r?Number(r.toFixed(2)):0),m(t)}}))}),[e.options.sal,e.options.project]),(0,a.useEffect)((function(){x||E(u)}),[u]),(0,a.useEffect)((function(){e.onChange({value:{effectiveDays:w,finalAmount:D}}),B(e.options.project.rate*(w||0))}),[w]),(0,a.useEffect)((function(){e.onChange({value:{effectiveDays:w,finalAmount:D}})}),[D]),(0,a.useEffect)((function(){e.onChange({value:{acronyms:y}})}),[y]),e.options.project&&e.options.sal&&e.options.sal.monthyear?o().createElement("div",null,f&&f.length?o().createElement(I(),{title:"Dettaglio lavoro dipendente",defaultOpened:!1},o().createElement("div",{className:"k-grid k-grid-md"},o().createElement("table",{className:"k-table k-grid-header-table k-table-md"},o().createElement("thead",{className:"k-table-thead"},o().createElement("tr",{className:"k-table-row"},o().createElement("th",{className:"k-table-th k-header"},"Nominativo"),o().createElement("th",{className:"k-table-th k-header"},"Acronimo"),o().createElement("th",{className:"k-table-th k-header"},"Giorni"),o().createElement("th",{className:"k-table-th k-header"},"Rapportino"))),o().createElement("tbody",{className:"k-table-tbody"},f.map((function(t){return o().createElement("tr",{className:"k-table-row",key:t.id},o().createElement("td",{className:"k-table-td"},t.first_name," ",t.last_name),o().createElement("td",{className:"k-table-td"},t.billAcronym),o().createElement("td",{className:"k-table-td"},t.total?Number(t.total.toFixed(2)):0," Giorni"),o().createElement("td",{className:"k-table-td"},o().createElement("div",null,o().createElement(N(),{type:"button",svgIcon:F.calendarIcon,themeColor:"outline",onClick:function(){q({date:new Date(e.options.sal.monthyear),person:{name:t.first_name+" "+t.last_name,id:t.id}})}}))))})))))):null,"CONS"===e.options.project.Offer.ProjectType.code?o().createElement("div",null,o().createElement(_(),{label:"Giorni Lavorati Sal",type:"number",value:u,disabled:!0}),o().createElement(_(),{label:"Giorni Effettivi Sal",onChange:function(e){C(!0);var t=e.target.value&&e.target.value.length?parseFloat(e.target.value):void 0;E(t?Number(t.toFixed(2)):void 0)},required:!0,type:"number",value:w,disabled:e.disabled}),o().createElement(_(),{label:"Tariffa Sal",type:"number",value:e.options.project.rate,disabled:!0})):null,o().createElement(_(),{required:!0,label:"Importo Sal",type:"number",value:D,onChange:function(e){var t=e.target.value&&e.target.value.length?parseFloat(e.target.value):void 0;B(t?Number(t.toFixed(2)):void 0)},disabled:e.disabled}),M&&o().createElement(z(),{title:"Rapportino di "+M.person.name,isOpen:M,onClose:function(){return q(void 0)},width:"100%",height:"100%"},o().createElement(R(),{forcePerson:{id:M.person.id,name:M.person.name},forceDate:M.date}))):o().createElement("span",null,"Seleziona anno mese")}))};function H(e,t,r){if(!t&&0!==t)return"Il campo ".concat(e," è obbligatorio.");r&&r(t)}var V=r(8733),K=r.n(V),U=r(8500),Y=r.n(U);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=function(e,t){return e&&t?new Date(e,t-1,1):null};function $(e){var t,r,i,l,u,s,d=(0,a.useRef)(),p=(0,a.useState)(e.row),f=(0,n.A)(p,2),m=f[0],b=f[1],v=function(){var t=Promise.resolve(),r={year:d.current.values.monthyear.getFullYear(),month:d.current.values.monthyear.getMonth()+1,notes:d.current.values.notes,project_id:e.project.id,amount:d.current.values.money.finalAmount,actualDays:d.current.values.money.effectiveDays,SalState:"PENDING"};if("create"===e.type)t=O.createResource(r);else if("edit"===e.type){var n={amount:d.current.values.amount?parseFloat(d.current.values.amount):void 0,billing_date:d.current.values.billing_date,billing_number:d.current.values.billing_number,advancePayment:d.current.values.advancePayment,acronyms:d.current.values.money.acronyms,baf_number:d.current.values.baf_number,sal_id:m.id};"BILLING_OK"===m.SalState?t=m.Bill?O.updateBill(m.Bill.id,n):O.createBill(n):"BILLED"===m.SalState?(n.amount=d.current.values.amountBill?parseFloat(d.current.values.amountBill):void 0,t=O.updateBill(m.Bill.id,n)):"PENDING"===m.SalState&&(t=O.updateResource(m.id,r))}return t.then((function(e){Y().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo ")}))};(0,a.useEffect)((function(){if("delete"===e.type)if("BILLED"===m.SalState)Y().openConfirm("Sei sicuro di rimuovere la fattura?",(function(){O.deleteBill(e.row.Bill.id).then((function(){Y().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo "),e.closeModalCallback(),e.refreshTable()}))}),"Cancella fattura");else{var t="BILLING_OK"===m.SalState?"Sei sicuro di voler revocare l'ok a fatturare?":"Sei sicuro di rimuovere il SAL?";Y().openConfirm(t,(function(){O.deleteResource(e.row.id).then((function(){Y().openModal({icon:!0,style:"success"},"Operazione avvenuta con successo "),e.closeModalCallback(),e.refreshTable()}))}),"Cancella SAL")}}),[e.type]);var y,g,h,A,w,E=J(J({},m),{},{money:m,amountBill:null===(t=m.Bill)||void 0===t?void 0:t.amount,billToPerson:null===(r=m.Bill)||void 0===r||null===(r=r.BillToPerson)||void 0===r?void 0:r.map((function(e){return e.Person.billAcronym})).join(", "),advancePayment:null===(i=m.Bill)||void 0===i?void 0:i.advancePayment,billing_number:null===(l=m.Bill)||void 0===l?void 0:l.billing_number,billing_date:null===(u=m.Bill)||void 0===u?void 0:u.billing_date,baf_number:null===(s=m.Bill)||void 0===s?void 0:s.baf_number});if(!E.monthyear)if(E.year&&E.month)E.monthyear=X(E.year,E.month);else if(e.project.lastSal){var S=new Date(e.project.lastSal);E.monthyear=X(S.getFullYear(),S.getMonth()+2)}else if(e.project.start_date){var j=new Date(e.project.start_date);E.monthyear=X(j.getFullYear(),j.getMonth()+1)}return o().createElement(o().Fragment,null,"delete"!=e.type?o().createElement(o().Fragment,null,o().createElement(K(),{ref:d,addedFields:G,fields:(y=E,g=function(e,t){b((function(r){return J(J({},r),{},(0,c.A)({},e,t))}))},h=e.type,A=e.project,w=e.otherSal,[{name:"monthyear",label:"Mese/Anno",type:"yearmonthsal-selector",valueOnChange:g,required:!0,disabled:"view"===h||"BILLING_OK"===y.SalState||"BILLED"===y.SalState,options:{disabled:w?w.map((function(e){return Q(Q({},e),{},{month:e.month-1})})):[]}},{name:"money",label:"s",type:"moneysal-selector",value:y,required:!0,showLabel:!1,disabled:"view"===h||"BILLING_OK"===y.SalState||"BILLED"===y.SalState,options:{project:A,sal:y}},{name:"BILLING_OK"===y.SalState?"amount":"amountBill",label:"Importo Fattura",type:"number",value:"BILLING_OK"===y.SalState?y.amount:y.amountBill,required:!0,disabled:"view"===h,conditions:function(e){return"BILLING_OK"===e.SalState||"BILLED"===e.SalState},validator:function(e){return H("Importo Fattura",e)}},{name:"billing_date",label:"Data Fattura",type:"date",value:y.billing_date,required:!0,disabled:"view"===h,conditions:function(e){return"BILLING_OK"===e.SalState||"BILLED"===e.SalState},validator:function(e){return H("Data Fattura",e)}},{name:"billing_number",label:"Numero Fattura",type:"text",value:y.billing_number,required:!0,disabled:"view"===h,conditions:function(e){return"BILLING_OK"===e.SalState||"BILLED"===e.SalState},validator:function(e){return H("Numero Fattura",e)}},{name:"baf_number",label:"Numero BAF",type:"text",value:y.baf_number,disabled:"view"===h,conditions:function(e){return"BILLING_OK"===e.SalState||"BILLED"===e.SalState}},{name:"billToPerson",label:"Acronimi",type:"text",value:y.billToPerson,required:!1,disabled:!0,conditions:function(e){return"BILLED"===e.SalState}},{name:"advancePayment",label:"Anticipata",type:"text",value:y.advancePayment,required:!1,disabled:"view"===h,conditions:function(e){return"BILLING_OK"===e.SalState||"BILLED"===e.SalState}},{name:"notes",label:"Note",type:"textarea",value:y.notes||"",disabled:"view"===h}]),formData:E,onSubmit:function(){return v().then((function(){e.refreshTable(),e.closeModalCallback()}))},submitText:"Salva",showSubmit:"view"!=e.type&&"BILLING_OK"!==m.SalState}),"create"!==e.type&&"delete"!=e.type&&"view"!=e.type&&o().createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},o().createElement(N(),{disabled:"BILLED"===e.row.SalState,svgIcon:"PENDING"===e.row.SalState?F.fileAddIcon:F.stampIcon,onClick:function(){v().then(e.onNext).then((function(){e.refreshTable(),e.closeModalCallback()}))}},"PENDING"===e.row.SalState?"Invia a fatturare":"BILLING_OK"===e.row.SalState?"Conferma Fattura":"Fatturato"))):o().createElement("div",null,"delete"))}var ee=r(8557);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=(0,a.createContext)({draft:{customers:[],projects:[]},billing:{customers:[],projects:[]},filters:{},addOpen:function(){},removeOpen:function(){},setFilters:function(){}}),ae=function(e){var t=(0,a.useState)({customers:[],projects:[]}),r=(0,n.A)(t,2),i=r[0],l=r[1],u=(0,a.useState)({customers:[],projects:[]}),s=(0,n.A)(u,2),d=s[0],p=s[1],f=(0,a.useState)({}),m=(0,n.A)(f,2),b=m[0],v=m[1];return o().createElement(ne.Provider,{value:{addOpen:function(e,t,r){if("draft"===e){var n=[].concat((0,ee.A)(i[t]),[r]);l((function(e){return re(re({},e),{},(0,c.A)({},t,n))}))}else if("billing"===e){var a=[].concat((0,ee.A)(d[t]),[r]);p((function(e){return re(re({},e),{},(0,c.A)({},t,a))}))}},removeOpen:function(e,t,r){if("draft"===e){var n=i[t].filter((function(e){return e!=r}));l((function(e){return re(re({},e),{},(0,c.A)({},t,n))}))}else if("billing"===e){var a=d[t].filter((function(e){return e!=r}));p((function(e){return re(re({},e),{},(0,c.A)({},t,a))}))}},billing:d,draft:i,filters:b,setFilters:v}},e.children)},oe=r(3069),ie=r.n(oe),le=o().memo((function(e){var t=(0,a.useContext)(ne).filters,r=[{key:"SalState",label:"Stato",type:"custom",render:function(t){return o().createElement("td",null,"Sal creato in attesa di ok a fatturare",ie().hasPermission("WRITE_SALES_SAL")&&o().createElement(N(),{size:"small",svgIcon:F.fileAddIcon,onClick:function(){p(t.id).then(e.refreshParent)}},"Ok a fatturare"))}},{key:"actualDays",label:"Giorni Lavorati",type:"number"},{key:"amount",label:"Importo",type:"custom",render:function(e){return o().createElement("td",null,"number"!=typeof(t=e.amount)?t:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(t));var t}},{key:"notes",label:"Note",type:"text",sortable:!0,filter:"text"},{key:"month",label:"Mese",type:"custom",sortable:!0,filter:"number",render:function(e){var t=new Date((new Date).getFullYear(),e.month-1,1).toLocaleString("it-IT",{month:"long"}).toString();return t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),o().createElement("td",null,t)}},{key:"year",label:"Anno",type:"number",sortable:!0,filter:"number"}],i=(0,a.useState)(),l=(0,n.A)(i,2),c=l[0],s=l[1],p=function(e){return new Promise((function(t,r){Y().openConfirm('Sei sicuro di spostare il Sal in stato "A FATTURARE" ?',(function(){t(O.updateResource(e,{SalState:"BILLING_OK"}))}),"Conferma operazione",r)}))},f=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getSalFromProject(e.project.id,r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,s(o.data),t.abrupt("return",{data:o.data,meta:{total:o.meta.model}});case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[e.project.id,t]);return o().createElement(o().Fragment,null,o().createElement("p",null,"Sal di ",e.project.Offer.name),o().createElement(S(),{writePermissions:["WRITE_SALES_SAL"],filterable:!0,sortable:!0,getData:f,columns:r,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return["show","edit","delete","create"]},formCrud:function(t,r,n,a){var i=c;return c&&t&&(i=c.filter((function(e){return e.id!=t.id}))),o().createElement(o().Fragment,null,o().createElement($,{otherSal:i,project:e.project,row:t,type:r,closeModalCallback:n,refreshTable:e.refreshParent,onNext:function(){return p(t.id)}}))}}))}));function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var de=[{key:"Offer.name",label:"Offerta",type:"string",sortable:!0,filter:"text"},{key:"Offer.ProjectType.description",label:"Tipo progetto",type:"string",sortable:!0,filter:"text"},{key:"Offer.Location.description",label:"Sede",type:"string",sortable:!0},{key:"Offer.billing_type",label:"Tipo Fatturazione",sortable:!0,type:"custom",render:function(e){return o().createElement("td",null,"Daily"!==e.Offer.billing_type?"A corpo":"Time material")}},{key:"amount",label:"Importo",type:"custom",render:function(e){return o().createElement("td",null,se(e.amount))},sortable:!0},{key:"totalBill",label:"Totale Sal Fatturato",type:"custom",render:function(e){return o().createElement("td",null,se(e.totalBill))},sortable:!0},{key:"lastSal",label:"Data Ultimo Sal",type:"date",sortable:!0,filter:"date"},{key:"start_date",label:"Data Inizio Progetto",type:"date",sortable:!0,filter:"date"},{key:"end_date",label:"Data Fine Progetto",type:"date",sortable:!0,filter:"date"}],pe=o().memo((function(e){var t=(0,a.useRef)(),r=(0,a.useContext)(ne),n=r.addOpen,i=r.removeOpen,l=r.draft,c=r.filters,s=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getProjectsWithSal(e.customer.id,r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,t.abrupt("return",{data:o.data.map((function(e){return ue(ue({},e),{},{gridtable_expanded:l.projects.some((function(t){return t===e.id}))})})),meta:{total:o.meta.total}});case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[e.customer.id,l.projects,c]),p=(0,a.useCallback)((function(t){return o().createElement(le,{project:t.dataItem,refreshParent:e.refreshParent,person:void 0})}),[]);return o().createElement(o().Fragment,null,o().createElement("p",null,"Progetti di ",e.customer.name),o().createElement(S(),{expand:{enabled:!0,render:p,onExpandChange:function(e,t){t?n("draft","projects",e.id):i("draft","projects",e.id)}},rowStyle:function(e){return{background:e.oldSal?"rgba(255,0,0,0.2)":e.missingSal?"rgba(255,209,0,0.2)":"rgba(0,255,0,0.2)"}},filterable:!0,pageable:!0,sortable:!0,getData:s,columns:de,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,ref:t}))})),fe=r(3558),me=r(1315);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var ge=[{key:"name",label:"Ragione sociale",type:"string",sortable:!0},{key:"totalAmount",label:"Totale Importo Progetti",type:"custom",render:function(e){return o().createElement("td",null,ye(e.totalAmount))},sortable:!0},{key:"totalBill",label:"Totale SAL Fatturato",type:"custom",render:function(e){return o().createElement("td",null,ye(e.totalBill))},sortable:!0}],he=o().memo((function(){var e=(0,a.useRef)(),t=(0,a.useContext)(ne),r=t.addOpen,n=t.removeOpen,i=t.draft,l=t.setFilters,c=(0,a.useCallback)(function(){var e=(0,u.A)(d().mark((function e(t,r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,O.getCustomersWithSal(t.currentPage,t.pageSize,r,n,!0);case 3:return a=e.sent,l(r),e.abrupt("return",{data:a.data.map((function(e){return ve(ve({},e),{},{gridtable_expanded:i.customers.some((function(t){return t===e.id}))})})),meta:{total:a.meta.total}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),[i.customers]),s=(0,a.useCallback)((function(t){var r;return o().createElement(pe,{customer:t.dataItem,refreshParent:null===(r=e.current)||void 0===r?void 0:r.refreshTable})}),[e.current]);return o().createElement(S(),{writePermissions:["WRITE_SALES_SAL"],expand:{enabled:!0,render:s,onExpandChange:function(e,t){t?r("draft","customers",e.id):n("draft","customers",e.id)}},rowStyle:function(e){return{background:e.oldSal?"rgba(255,0,0,0.2)":e.missingSal?"rgba(255,209,0,0.2)":"rgba(0,255,0,0.2)"}},filterable:!0,pageable:!0,sortable:!0,getData:c,columns:ge,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,ref:e,addedFilters:[{name:"month",label:"Mese",type:"filter-autocomplete",options:{getData:function(e){return Promise.resolve([{id:1,name:"Gennaio"},{id:2,name:"Febbraio"},{id:3,name:"Marzo"},{id:4,name:"Aprile"},{id:5,name:"Maggio"},{id:6,name:"Giugno"},{id:7,name:"Luglio"},{id:8,name:"Agosto"},{id:9,name:"Settembre"},{id:10,name:"Ottobre"},{id:11,name:"Novembre"},{id:12,name:"Dicembre"}].filter((function(t){return!e||t.name.toLowerCase().indexOf(e.toLowerCase())>=0})))},getValue:function(e){return null==e?void 0:e.id}}},{name:"year",label:"Anno",type:"number"},{name:"offer_id",label:"Offerta",type:"filter-autocomplete",options:{getData:function(e){return fe.R.searchOfferte(e).then((function(e){return e.data}))},getValue:function(e){return null==e?void 0:e.id}}},{name:"customer_id",label:"Cliente",type:"filter-autocomplete",options:{getData:function(e){return O.searchCustomer(e)},getValue:function(e){return null==e?void 0:e.id}}},{name:"person_id",label:"Dipendente(digita un carattere per la ricerca)",type:"filter-autocomplete",options:{getData:function(e){return me.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:e.firstName+" "+e.lastName}})):[]}))},getValue:function(e){return null==e?void 0:e.id}}}]})})),Ae=o().memo((function(e){var t=(0,a.useState)(),r=(0,n.A)(t,2),i=r[0],l=r[1],c=(0,a.useContext)(ne).filters,s=[{key:"SalState",label:"Stato",type:"custom",render:function(e){return o().createElement("td",null,"Ok a fatturare",e.Bill&&ie().hasPermission("WRITE_SALES_SAL")?o().createElement(N(),{size:"small",svgIcon:F.stampIcon,onClick:function(){f(e.id)}},"Conferma Fattura Fattura"):null)}},{key:"actualDays",label:"Giorni Lavorati",type:"number"},{key:"amount",label:"Importo",type:"custom",render:function(e){return o().createElement("td",null,"number"!=typeof(t=e.amount)?t:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(t));var t}},{key:"notes",label:"Note",type:"text",sortable:!0,filter:"text"},{key:"month",label:"Mese",type:"custom",sortable:!0,filter:"number",render:function(e){var t=new Date((new Date).getFullYear(),e.month-1,1).toLocaleString("it-IT",{month:"long"}).toString();return t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),o().createElement("td",null,t)}},{key:"year",label:"Anno",type:"number",sortable:!0,filter:"number"}],p=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getSalRTBFromProject(e.project.id,r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,l(o.data),t.abrupt("return",{data:o.data,meta:{total:o.meta.total}});case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[e.project.id,c]),f=function(e){return new Promise((function(t,r){Y().openConfirm('Sei sicuro di spostare il Sal in stato "FATTURATO" ?',(function(){t(O.updateResource(e,{SalState:"BILLED"}))}),"Conferma operazione",r)}))};return o().createElement(o().Fragment,null,o().createElement("p",null,"Sal di ",e.project.Offer.name),o().createElement(S(),{writePermissions:["WRITE_SALES_SAL"],filterable:!0,sortable:!0,getData:p,columns:s,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return["show","edit","delete"]},formCrud:function(t,r,n,a){var l=i;return i&&t&&(l=i.filter((function(e){return e.id!=t.id}))),o().createElement($,{otherSal:l,project:e.project,row:t,type:r,closeModalCallback:n,refreshTable:e.refreshParent,onNext:function(){return f(t.id)}})}}))}));function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var Se=[{key:"Offer.name",label:"Offerta",type:"string",sortable:!0,filter:"text"},{key:"Offer.ProjectType.description",label:"Tipo progetto",type:"string",sortable:!0,filter:"text"},{key:"Offer.Location.description",label:"Sede",type:"string",sortable:!0},{key:"Offer.billing_type",label:"Tipo Fatturazione",sortable:!0,type:"custom",render:function(e){return o().createElement("td",null,"Daily"!==e.Offer.billing_type?"A corpo":"Time material")}},{key:"amount",label:"Importo",type:"custom",render:function(e){return o().createElement("td",null,Ee(e.amount))},sortable:!0},{key:"totalBill",label:"Totale Sal Fatturato",type:"custom",render:function(e){return o().createElement("td",null,Ee(e.totalBill))},sortable:!0},{key:"lastSal",label:"Data Ultimo Sal",type:"date",sortable:!0,filter:"date"},{key:"start_date",label:"Data Inizio Progetto",type:"date",sortable:!0,filter:"date"},{key:"end_date",label:"Data Fine Progetto",type:"date",sortable:!0,filter:"date"}],je=o().memo((function(e){var t=(0,a.useContext)(ne),r=t.addOpen,n=t.removeOpen,i=t.billing,l=t.filters,c=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getReadyToBillByProject(e.customer.id,r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,t.abrupt("return",{data:o.data.map((function(e){return Oe(Oe({},e),{},{gridtable_expanded:i.projects.some((function(t){return t===e.id}))})})),meta:{total:o.meta.total}});case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[l]);return o().createElement(S(),{writePermissions:["WRITE_SALES_SAL"],expand:{enabled:!0,render:function(t){return o().createElement(Ae,{project:t.dataItem,refreshParent:e.refreshParent})},onExpandChange:function(e,t){t?r("billing","projects",e.id):n("billing","projects",e.id)}},filterable:!0,pageable:!0,sortable:!0,getData:c,columns:Se,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return[]}})}));function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var Pe=[{key:"name",label:"Ragione sociale",type:"string",sortable:!0},{key:"totalAmount",label:"Totale Importo Progetti",type:"custom",render:function(e){return o().createElement("td",null,ke(e.totalAmount))},sortable:!0},{key:"totalBill",label:"Totale SAL Fatturato",type:"custom",render:function(e){return o().createElement("td",null,ke(e.totalBill))},sortable:!0}];function _e(){var e=(0,a.useRef)(),t=(0,a.useContext)(ne),r=t.addOpen,n=t.removeOpen,i=t.billing,l=(t.filters,t.setFilters),c=(0,a.useCallback)(function(){var e=(0,u.A)(d().mark((function e(t,r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,O.getReadyToBillByCustomer(t.currentPage,t.pageSize,r,n,!0);case 3:return a=e.sent,l(r),e.abrupt("return",{data:a.data.map((function(e){return Ce(Ce({},e),{},{gridtable_expanded:i.customers.some((function(t){return t===e.id}))})})),meta:{total:a.meta.total}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),[]);return o().createElement(S(),{writePermissions:["WRITE_SALES_SAL"],addedFilters:[{name:"month",label:"Mese",type:"filter-autocomplete",options:{getData:function(e){return Promise.resolve([{id:1,name:"Gennaio"},{id:2,name:"Febbraio"},{id:3,name:"Marzo"},{id:4,name:"Aprile"},{id:5,name:"Maggio"},{id:6,name:"Giugno"},{id:7,name:"Luglio"},{id:8,name:"Agosto"},{id:9,name:"Settembre"},{id:10,name:"Ottobre"},{id:11,name:"Novembre"},{id:12,name:"Dicembre"}].filter((function(t){return!e||t.name.toLowerCase().indexOf(e.toLowerCase())>=0})))},getValue:function(e){return null==e?void 0:e.id}}},{name:"year",label:"Anno",type:"number"},{name:"offer_id",label:"Offerta",type:"filter-autocomplete",options:{getData:function(e){return fe.R.searchOfferte(e).then((function(e){return e.data}))},getValue:function(e){return null==e?void 0:e.id}}},{name:"customer_id",label:"Cliente",type:"filter-autocomplete",options:{getData:function(e){return O.searchCustomer(e)},getValue:function(e){return null==e?void 0:e.id}}},{name:"person_id",label:"Dipendente(digita un carattere per la ricerca)",type:"filter-autocomplete",options:{getData:function(e){return me.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:e.firstName+" "+e.lastName}})):[]}))},getValue:function(e){return null==e?void 0:e.id}}}],expand:{enabled:!0,render:function(t){var r;return o().createElement(je,{customer:t.dataItem,refreshParent:null===(r=e.current)||void 0===r?void 0:r.refreshTable})},onExpandChange:function(e,t){t?r("billing","customers",e.id):n("billing","customers",e.id)}},filterable:!0,pageable:!0,sortable:!0,getData:c,columns:Pe,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,ref:e,actions:function(){return[]}})}var De=r(1079);function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){(0,c.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne=[{key:"SalState",label:"Stato",type:"custom",render:function(e){return o().createElement("td",null,"Sal Fatturato")}},{key:"Sal.actualDays",label:"Giorni Lavorati",type:"number"},{key:"amount",label:"Importo",type:"custom",render:function(e){return o().createElement("td",null,"number"!=typeof(t=e.amount)?t:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(t));var t}},{key:"billing_date",label:"Data fatturazione",type:"date",sortable:!0,filter:"date"},{key:"billing_number",label:"Numero fattura",type:"text",sortable:!0,filter:"text"},{key:"month",label:"Mese",type:"custom",sortable:!0,filter:"number",render:function(e){var t=new Date((new Date).getFullYear(),e.Sal.month-1,1).toLocaleString("it-IT",{month:"long"}).toString();return t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),o().createElement("td",null,t)}},{key:"Sal.year",label:"Anno",type:"number",sortable:!0,filter:"number"}],Fe=o().memo((function(e){var t=(0,a.useContext)(ne).filters,r=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getHistoryBillFromProject(e.project.id,r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,t.abrupt("return",{data:o.data,meta:o.meta});case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[e.project.id,t]);return o().createElement(o().Fragment,null,o().createElement("p",null,"Sal di ",e.project.Offer.name),o().createElement(S(),{filterable:!0,sortable:!0,getData:r,columns:Ne,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return["show","edit","delete"]},formCrud:function(t,r,n,a){return o().createElement($,{project:e.project,row:Be(Be({},t.Sal),{},{Bill:(0,De.omit)(t,["Sal"])}),type:r,closeModalCallback:n,refreshTable:e.refreshParent,onNext:function(){return Promise.resolve()}})}}))}));function Te(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var ze=[{key:"Offer.name",label:"Offerta",type:"string",sortable:!0,filter:"text"},{key:"Offer.ProjectType.description",label:"Tipo progetto",type:"string",sortable:!0,filter:"text"},{key:"Offer.Location.description",label:"Sede",type:"string",sortable:!0},{key:"Offer.billing_type",label:"Tipo Fatturazione",sortable:!0,type:"custom",render:function(e){return o().createElement("td",null,"Daily"!==e.Offer.billing_type?"A corpo":"Time material")}},{key:"amount",label:"Importo",type:"custom",render:function(e){return o().createElement("td",null,Te(e.amount))},sortable:!0},{key:"totalBill",label:"Totale Sal Fatturato",type:"custom",render:function(e){return o().createElement("td",null,Te(e.totalBill))},sortable:!0},{key:"lastBill",label:"Data Ultima Fattura",type:"date",sortable:!0,filter:"date"},{key:"start_date",label:"Data Inizio Progetto",type:"date",sortable:!0,filter:"date"},{key:"end_date",label:"Data Fine Progetto",type:"date",sortable:!0,filter:"date"}],Le=o().memo((function(e){var t=(0,a.useContext)(ne).filters,r=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getHistoryBillFromCustomer(e.customer.id,r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,t.abrupt("return",{data:o.data,meta:o.meta});case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[t]),n=(0,a.useCallback)((function(t){return o().createElement(Fe,{project:t.dataItem,refreshParent:e.refreshParent})}),[]);return o().createElement(S(),{expand:{enabled:!0,render:n},filterable:!0,pageable:!0,sortable:!0,getData:r,columns:ze,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,actions:function(){return[]}})}));function Re(e){return"number"!=typeof e?e:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}var Me=[{key:"name",label:"Ragione sociale",type:"string",sortable:!0},{key:"totalAmount",label:"Totale Importo Progetti",type:"custom",render:function(e){return o().createElement("td",null,Re(e.totalAmount))},sortable:!0},{key:"totalBill",label:"Totale SAL Fatturato",type:"custom",render:function(e){return o().createElement("td",null,Re(e.totalBill))},sortable:!0}],We=o().memo((function(){var e=(0,a.useContext)(ne).setFilters,t=(0,a.useRef)(),r=(0,a.useCallback)(function(){var t=(0,u.A)(d().mark((function t(r,n,a){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,O.getHistoryBillCustomer(r.currentPage,r.pageSize,n,a,!0);case 3:return o=t.sent,e(n),t.abrupt("return",{data:o.data,meta:o.meta});case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[]),n=(0,a.useCallback)((function(e){var r;return o().createElement(Le,{customer:e.dataItem,refreshParent:null===(r=t.current)||void 0===r?void 0:r.refreshTable})}),[]);return o().createElement(S(),{writePermissions:["WRITE_SALES_SAL"],expand:{enabled:!0,render:n},ref:t,filterable:!0,pageable:!0,sortable:!0,getData:r,columns:Me,resizableWindow:!0,initialHeightWindow:800,draggableWindow:!0,initialWidthWindow:900,resizable:!0,addedFilters:[{name:"month",label:"Mese",type:"filter-autocomplete",options:{getData:function(e){return Promise.resolve([{id:1,name:"Gennaio"},{id:2,name:"Febbraio"},{id:3,name:"Marzo"},{id:4,name:"Aprile"},{id:5,name:"Maggio"},{id:6,name:"Giugno"},{id:7,name:"Luglio"},{id:8,name:"Agosto"},{id:9,name:"Settembre"},{id:10,name:"Ottobre"},{id:11,name:"Novembre"},{id:12,name:"Dicembre"}].filter((function(t){return!e||t.name.toLowerCase().indexOf(e.toLowerCase())>=0})))},getValue:function(e){return null==e?void 0:e.id}}},{name:"year",label:"Anno",type:"number"},{name:"offer_id",label:"Offerta",type:"filter-autocomplete",options:{getData:function(e){return fe.R.searchOfferte(e).then((function(e){return e.data}))},getValue:function(e){return null==e?void 0:e.id}}},{name:"customer_id",label:"Cliente",type:"filter-autocomplete",options:{getData:function(e){return O.searchCustomer(e)},getValue:function(e){return null==e?void 0:e.id}}},{name:"billing_number",label:"Numero fattura",type:"string"},{name:"person_id",label:"Dipendente(digita un carattere per la ricerca)",type:"filter-autocomplete",options:{getData:function(e){return me.L.searchAccount(e).then((function(e){return e?e.map((function(e){return{id:e.person_id,name:e.firstName+" "+e.lastName}})):[]}))},getValue:function(e){return null==e?void 0:e.id}}}]})}));function qe(){var e=(0,a.useState)(0),t=(0,n.A)(e,2),r=t[0],i=t[1];return o().createElement(ae,null,o().createElement(l(),{renderAllContent:!1,tabs:[{title:"Draft",children:o().createElement(he,null)},{title:"Da fatturare",children:o().createElement(_e,null)},{title:"Storico",children:o().createElement(We,null)}],onSelect:function(e){i(e.selected)},selected:r}))}},6531:(e,t,r)=>{r.d(t,{m:()=>y});var n=r(2816),a=r(9542),o=r(6752),i=r(8697),l=r(3509),c=r(2644),u=r(7136),s=r(2207),d=r.n(s),p=r(9322),f=r.n(p),m=r(1178),b=r.n(m);function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var y=new(function(e){function t(){var e,r,o,c;(0,a.A)(this,t);for(var s=arguments.length,p=new Array(s),f=0;f<s;f++)p[f]=arguments[f];return r=this,o=t,c=[].concat(p),o=(0,l.A)(o),e=(0,i.A)(r,v()?Reflect.construct(o,c||[],(0,l.A)(r).constructor):o.apply(r,c)),(0,u.A)(e,"getHasProject",function(){var e=(0,n.A)(d().mark((function e(t,r,n,a,o,i){var l,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l={pageNum:t,pageSize:r,include:i},"string"==typeof o&&""!==o.trim()&&(l.term=o),c={},n&&(c.filtering=n),a&&(c.sorting=a),i&&(c.include=!0),e.next=9,b().post("api/v1/customers/findCustomersProjects",c,{params:l});case 9:return u=e.sent,e.abrupt("return",u.data);case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}()),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getTableName",value:function(){return"customers"}}])}(f()))},3558:(e,t,r)=>{r.d(t,{R:()=>g});var n=r(2816),a=r(9542),o=r(6752),i=r(8697),l=r(3509),c=r(2644),u=r(7136),s=r(2207),d=r.n(s),p=r(9322),f=r.n(p),m=r(1178),b=r.n(m),v=r(1977);function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var g=new(function(e){function t(){var e,r,o,c;(0,a.A)(this,t);for(var s=arguments.length,p=new Array(s),f=0;f<s;f++)p[f]=arguments[f];return r=this,o=t,c=[].concat(p),o=(0,l.A)(o),e=(0,i.A)(r,y()?Reflect.construct(o,c||[],(0,l.A)(r).constructor):o.apply(r,c)),(0,u.A)(e,"fetchResources",function(){var e=(0,n.A)(d().mark((function e(t,r,n,a){var o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={pageNum:r,pageSize:n,include:a},e.next=4,b().get("api/v1/crud/".concat(t),{params:o});case 4:return i=e.sent,e.abrupt("return",i.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),(0,u.A)(e,"getDownloadFile",function(){var e=(0,n.A)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b().get("api/v1/files/stream/".concat(t),{responseType:"blob"});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.A)(e,"searchOfferte",(function(e){return b().get("api/v1/offers/?term=".concat(e)).then((function(e){return e.data}))})),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getTableName",value:function(){return"offers"}},{key:"getProjectType",value:function(e){return b().get("/api/v1/crud/projecttype?term="+e)}},{key:"getBillingType",value:function(e){return b().get("/api/v1/offers/billingTypes").then((function(t){return t.data.map((function(e){return{id:e,name:(0,v.hV)(e)}})).filter((function(t){return!e||!e.length||t.name.toLowerCase().indexOf(e.toLocaleLowerCase())>=0}))}))}},{key:"getOutcomeType",value:function(e){return b().get("/api/v1/offers/outcomeTypes").then((function(t){return t.data.map((function(e){return{id:e,name:(0,v.o5)(e)}})).filter((function(t){return!e||!e.length||t.name.toLowerCase().indexOf(e.toLocaleLowerCase())>=0}))}))}},{key:"getProtocol",value:(s=(0,n.A)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("/api/v1/offers/getProtocol?customer_code=".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"getFilesByIds",value:(r=(0,n.A)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("api/v1/files/get/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"catch",value:function(e){throw console.error("Error fetching resources:",e),e}}]);var r,s}(f()))},1315:(e,t,r)=>{r.d(t,{L:()=>d});var n=r(2816),a=r(6752),o=r(9542),i=r(7136),l=r(2207),c=r.n(l),u=r(1178),s=r.n(u),d=new((0,a.A)((function e(){(0,o.A)(this,e),(0,i.A)(this,"getAccounts",function(){var e=(0,n.A)(c().mark((function e(t,r,n,a,o){var i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={pageNum:t,pageSize:r,include:o},e.next=4,s().post("api/v1/accounts",{filtering:n,sorting:a},{params:i});case 4:return l=e.sent,e.abrupt("return",l.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}()),(0,i.A)(this,"fetchResources",function(){var e=(0,n.A)(c().mark((function e(t,r,n,a){var o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={pageNum:r,pageSize:n,include:a},e.next=4,s().get("api/v1/crud/".concat(t),{params:o});case 4:return i=e.sent,e.abrupt("return",i.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),(0,i.A)(this,"fetchmodel",(0,n.A)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().get("api/v1/accounts/models");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))),(0,i.A)(this,"createResource",function(){var e=(0,n.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().post("/api/v1/accounts/create",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error creating resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),(0,i.A)(this,"fetchResource",function(){var e=(0,n.A)(c().mark((function e(t,r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().get("crud/".concat(t,"/").concat(r));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,i.A)(this,"getCV",function(){var e=(0,n.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().get("api/v1/files/stream/".concat(t),{responseType:"blob"});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),(0,i.A)(this,"updateResource",function(){var e=(0,n.A)(c().mark((function e(t,r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().patch("api/v1/accounts/update/".concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error updating resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,i.A)(this,"deleteResource",function(){var e=(0,n.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().delete("api/v1/accounts/delete/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error deleting resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),(0,i.A)(this,"searchCommerciale",(function(e){return s().get("api/v1/accounts/findCOM?search=".concat(e)).then((function(e){return e.data}))})),(0,i.A)(this,"searchAccount",(function(e){return s().get("api/v1/accounts/findByName?search=".concat(e)).then((function(e){return e.data}))}))})))},8215:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,'.VD1s_Nuv4v2stm74z4RD:first-child > :first-child > * {\n        display: flex;\n        justify-content: center;\n    }\n    \n    .TnBIPr90dnjNA5GqtAyZ:first-child {\n    max-width:none;\n\n    & > :first-child > * {\n        display: grid;\n        /*grid-template-rows: repeat(6, 1fr);*/\n        grid-template-columns: repeat(3, 1fr);\n        gap: 2% 10%;\n    }\n    & form{\n        max-width: 100% !important;\n    }\n }\n \n .qqZ98aYpvjQoZO9smyjZ{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap:20px;\n    align-items: center;\n    font-size: 20px;\n     & > div {\n        display: flex;\n        gap:20px;\n     }\n }\n\n /* .checkboxContainer:first-child > :first-child > * > input:checked{\n    background-color: #E1F5FE;\n    color: #0497B8 !important;\n    padding: 0.5rem !important;\n    border-radius: 4px !important;\n  } */\n \n  .vV673Kqzsa8LkcB11EwH  {\n    & div[dir="ltr"]  input[aria-checked="true"] {\n        background-color: #E1F5FE;\n        background-color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n    }\n    &  div[dir="ltr"].WU9ruK3zWj3lCjRbn2kS {\n        background-color: #E1F5FE !important;\n        color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n      }\n  }\n \n ',"",{version:3,sources:["webpack://./src/component/ClienteCrud/style.module.scss"],names:[],mappings:"AAAA;QACQ,aAAa;QACb,uBAAuB;IAC3B;;IAEA;IACA,cAAc;;IAEd;QACI,aAAa;QACb,sCAAsC;QACtC,qCAAqC;QACrC,WAAW;IACf;IACA;QACI,0BAA0B;IAC9B;CACH;;CAEA;IACG,aAAa;IACb,sBAAsB;IACtB,uBAAuB;IACvB,QAAQ;IACR,mBAAmB;IACnB,eAAe;KACd;QACG,aAAa;QACb,QAAQ;KACX;CACJ;;CAEA;;;;;KAKI;;EAEH;IACE;QACI,yBAAyB;QACzB,oCAAoC;QACpC,0BAA0B;QAC1B,6BAA6B;IACjC;IACA;QACI,oCAAoC;QACpC,yBAAyB;QACzB,0BAA0B;QAC1B,6BAA6B;MAC/B;EACJ",sourcesContent:['.parentTab:first-child > :first-child > * {\n        display: flex;\n        justify-content: center;\n    }\n    \n    .parentForm:first-child {\n    max-width:none;\n\n    & > :first-child > * {\n        display: grid;\n        /*grid-template-rows: repeat(6, 1fr);*/\n        grid-template-columns: repeat(3, 1fr);\n        gap: 2% 10%;\n    }\n    & form{\n        max-width: 100% !important;\n    }\n }\n \n .formDelete{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap:20px;\n    align-items: center;\n    font-size: 20px;\n     & > div {\n        display: flex;\n        gap:20px;\n     }\n }\n\n /* .checkboxContainer:first-child > :first-child > * > input:checked{\n    background-color: #E1F5FE;\n    color: #0497B8 !important;\n    padding: 0.5rem !important;\n    border-radius: 4px !important;\n  } */\n \n  .checkboxContainer  {\n    & div[dir="ltr"]  input[aria-checked="true"] {\n        background-color: #E1F5FE;\n        background-color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n    }\n    &  div[dir="ltr"].checked {\n        background-color: #E1F5FE !important;\n        color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n      }\n  }\n \n '],sourceRoot:""}]),i.locals={parentTab:"VD1s_Nuv4v2stm74z4RD",parentForm:"TnBIPr90dnjNA5GqtAyZ",formDelete:"qqZ98aYpvjQoZO9smyjZ",checkboxContainer:"vV673Kqzsa8LkcB11EwH",checked:"WU9ruK3zWj3lCjRbn2kS"};const l=i},3061:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,".aSMrZJBgi5sSEnSnIMqs{\n    display: flex;\n    gap:10px;\n}","",{version:3,sources:["webpack://./src/component/Modals/AttivitaModal/AttivitaCrud/AssigningTable/styles.module.scss"],names:[],mappings:"AAAA;IACI,aAAa;IACb,QAAQ;AACZ",sourcesContent:[".buttonsContainer{\n    display: flex;\n    gap:10px;\n}"],sourceRoot:""}]),i.locals={buttonsContainer:"aSMrZJBgi5sSEnSnIMqs"};const l=i},7250:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,"._sadmAhAE3nT928aSEnQ {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}","",{version:3,sources:["webpack://./src/component/Modals/AttivitaModal/styles.module.scss"],names:[],mappings:"AAAA;EACE,aAAa;EACb,yBAAyB;EACzB,QAAQ;EACR,gBAAgB;AAClB",sourcesContent:[".buttonsContainer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}"],sourceRoot:""}]),i.locals={buttonsContainer:"_sadmAhAE3nT928aSEnQ"};const l=i},4426:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,".YUl0DySQVXzk8yaZlt1S {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}","",{version:3,sources:["webpack://./src/component/Modals/CostiCommessaModal/styles.module.scss"],names:[],mappings:"AAAA;EACE,aAAa;EACb,yBAAyB;EACzB,QAAQ;EACR,gBAAgB;AAClB",sourcesContent:[".buttonsContainer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}"],sourceRoot:""}]),i.locals={buttonsContainer:"YUl0DySQVXzk8yaZlt1S"};const l=i},8392:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,".ZD0yrfwLjAdgE9J8iPEg > form > fieldset > div{\n    margin-top: 0 !important;\n}","",{version:3,sources:["webpack://./src/component/Modals/DatiOrdineModal/style.module.scss"],names:[],mappings:"AAAA;IACI,wBAAwB;AAC5B",sourcesContent:[".form > form > fieldset > div{\n    margin-top: 0 !important;\n}"],sourceRoot:""}]),i.locals={form:"ZD0yrfwLjAdgE9J8iPEg"};const l=i},1294:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,'.yhfcwEzIzN50fANzi3ag:first-child > :first-child > * {\n        display: flex;\n        justify-content: center;\n    }\n    \n    .Qe4aPnPas4qUsgONiB3U:first-child {\n    max-width:none;\n\n    & > :first-child > * {\n        display: grid;\n        /*grid-template-rows: repeat(6, 1fr);*/\n        grid-template-columns: repeat(3, 1fr);\n        gap: 2% 10%;\n    }\n    & form{\n        max-width: 100% !important;\n    }\n }\n \n .SxyGIrL50wHtkoeTCGPL{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap:20px;\n    align-items: center;\n    font-size: 20px;\n     & > div {\n        display: flex;\n        gap:20px;\n     }\n }\n\n /* .checkboxContainer:first-child > :first-child > * > input:checked{\n    background-color: #E1F5FE;\n    color: #0497B8 !important;\n    padding: 0.5rem !important;\n    border-radius: 4px !important;\n  } */\n \n  .JOVzFx9ldcIUevQCYdPj  {\n    & div[dir="ltr"]  input[aria-checked="true"] {\n        background-color: #E1F5FE;\n        background-color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n    }\n    &  div[dir="ltr"].AcMrIjIoRvZJxbArlt9p {\n        background-color: #E1F5FE !important;\n        color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n      }\n  }\n \n .a12iKD4KgJ2LlXm_5rF6{\n    display:flex;\n    justify-content: center;\n }\n\n .Bm3wOvSwJhBqwHedbzRW{\n    display:flex;\n    justify-content: end;\n    gap:20px\n }',"",{version:3,sources:["webpack://./src/component/OffertaCrud/style.module.scss"],names:[],mappings:"AAAA;QACQ,aAAa;QACb,uBAAuB;IAC3B;;IAEA;IACA,cAAc;;IAEd;QACI,aAAa;QACb,sCAAsC;QACtC,qCAAqC;QACrC,WAAW;IACf;IACA;QACI,0BAA0B;IAC9B;CACH;;CAEA;IACG,aAAa;IACb,sBAAsB;IACtB,uBAAuB;IACvB,QAAQ;IACR,mBAAmB;IACnB,eAAe;KACd;QACG,aAAa;QACb,QAAQ;KACX;CACJ;;CAEA;;;;;KAKI;;EAEH;IACE;QACI,yBAAyB;QACzB,oCAAoC;QACpC,0BAA0B;QAC1B,6BAA6B;IACjC;IACA;QACI,oCAAoC;QACpC,yBAAyB;QACzB,0BAA0B;QAC1B,6BAA6B;MAC/B;EACJ;;CAED;IACG,YAAY;IACZ,uBAAuB;CAC1B;;CAEA;IACG,YAAY;IACZ,oBAAoB;IACpB;CACH",sourcesContent:['.parentTab:first-child > :first-child > * {\n        display: flex;\n        justify-content: center;\n    }\n    \n    .parentForm:first-child {\n    max-width:none;\n\n    & > :first-child > * {\n        display: grid;\n        /*grid-template-rows: repeat(6, 1fr);*/\n        grid-template-columns: repeat(3, 1fr);\n        gap: 2% 10%;\n    }\n    & form{\n        max-width: 100% !important;\n    }\n }\n \n .formDelete{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap:20px;\n    align-items: center;\n    font-size: 20px;\n     & > div {\n        display: flex;\n        gap:20px;\n     }\n }\n\n /* .checkboxContainer:first-child > :first-child > * > input:checked{\n    background-color: #E1F5FE;\n    color: #0497B8 !important;\n    padding: 0.5rem !important;\n    border-radius: 4px !important;\n  } */\n \n  .checkboxContainer  {\n    & div[dir="ltr"]  input[aria-checked="true"] {\n        background-color: #E1F5FE;\n        background-color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n    }\n    &  div[dir="ltr"].checked {\n        background-color: #E1F5FE !important;\n        color: #0497B8 !important;\n        padding: 0.5rem !important;\n        border-radius: 4px !important;\n      }\n  }\n \n .loader{\n    display:flex;\n    justify-content: center;\n }\n\n .buttons{\n    display:flex;\n    justify-content: end;\n    gap:20px\n }'],sourceRoot:""}]),i.locals={parentTab:"yhfcwEzIzN50fANzi3ag",parentForm:"Qe4aPnPas4qUsgONiB3U",formDelete:"SxyGIrL50wHtkoeTCGPL",checkboxContainer:"JOVzFx9ldcIUevQCYdPj",checked:"AcMrIjIoRvZJxbArlt9p",loader:"a12iKD4KgJ2LlXm_5rF6",buttons:"Bm3wOvSwJhBqwHedbzRW"};const l=i},3442:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1354),a=r.n(n),o=r(6314),i=r.n(o)()(a());i.push([e.id,".BjdKFPkFCAEZFmTZE7ow {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}","",{version:3,sources:["webpack://./src/component/ProgettoCrud/styles.module.scss"],names:[],mappings:"AAAA;EACE,aAAa;EACb,yBAAyB;EACzB,QAAQ;EACR,gBAAgB;AAClB",sourcesContent:[".buttonsContainer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}"],sourceRoot:""}]),i.locals={buttonsContainer:"BjdKFPkFCAEZFmTZE7ow"};const l=i}}]);
//# sourceMappingURL=583.js.map