{"version":3,"file":"167.js","mappings":"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","sources":["webpack://portaal-mfe-hr/./src/component/RapportinoCalendar/component.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { isNil } from \"lodash\";\nimport Calendar from \"common/Calendar\";\nimport CalendarMobile from \"common/CalendarMobile\";\nimport { TimesheetsService } from \"../../services/rapportinoService\";\nimport { useWindowSize } from \"@uidotdev/usehooks\";\nimport RapportinoCrud from \"../RapportinoCrud/component\";\nimport withScheduler from \"common/hoc/SchedulerItem\"\nimport NotificationActions from 'common/providers/NotificationProvider'\nimport { chevronLeftIcon, chevronRightIcon } from 'common/icons';\nimport SvgIcon from 'common/SvgIcon'\nimport Button from 'common/Button'\nimport Modal from 'common/Modal'\nimport { AutoCompletePerson } from \"./customFields\";\nimport authService from \"common/services/AuthService\";\n\nconst RapportinoItemView = (props: any) => {\n\n  let bg: string | undefined = undefined;\n  let color: string | undefined = undefined;\n  let status = '';\n  \n  if (props.request) {\n    if (props.request.approved === null) {\n      bg = 'rgb(255, 192, 0)';\n      color = 'black';\n      status = '(Da approvare)'\n    } else if (props.request.approved) {\n      bg = 'green';\n      status = '(Approvata)'\n    } else {\n      bg = 'red'\n      status = '(Rifiutata)'\n    }\n  }\n\n  const deleteRequest = (requestSelected: any, titoloRichiesta) => {\n    NotificationActions.openConfirm('Sei sicuro di rimuovere la richiesta di ' + titoloRichiesta + ' che va dal ' + new Date(requestSelected.start_date).toLocaleDateString() + ' al ' + new Date(requestSelected.end_date).toLocaleDateString() + '?',\n      () => {\n        TimesheetsService.deleteLeaveRequest(requestSelected.id).then(() => {\n          NotificationActions.openModal(\n            { icon: true, style: \"success\" },\n            \"Operazione avvenuta con successo \"\n          );\n          setTimeout(() => { document.dispatchEvent(new CustomEvent(\"CalendarRefreshData\")) }, 500);\n        })\n\n      },\n      'Cancella richiesta'\n    )\n  }\n\n  return <div style={{\n    color: color,\n    background: bg,\n    width: \"100%\",\n    height: \"100%\",\n    position: \"absolute\",\n    right: 0,\n    left: 0,\n    top: 0,\n    bottom: 0,\n    textAlign: \"center\",\n    /*\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',*/\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\",\n    fontSize: 14\n  }}>{!props.request ? `${props.hours} ore - ` : null} {props.title} {status}  {/* {props.request && props.request.approved === null ?\n    <button style={{ background: 'transparent', border: 'none', cursor: 'pointer' }} title={\"Cancella richiesta \" + props.title} onClick={(e) => {\n      e.preventDefault();\n      deleteRequest(props.request, props.title)\n    }}>\n      <svg style={{ marginLeft: 10 }} width=\"20px\" height=\"20px\" viewBox=\"0 0 1024 1024\" fill=\"#000000\" className=\"icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M32 241.6c-11.2 0-20-8.8-20-20s8.8-20 20-20l940 1.6c11.2 0 20 8.8 20 20s-8.8 20-20 20L32 241.6zM186.4 282.4c0-11.2 8.8-20 20-20s20 8.8 20 20v688.8l585.6-6.4V289.6c0-11.2 8.8-20 20-20s20 8.8 20 20v716.8l-666.4 7.2V282.4z\" fill=\"\" /><path d=\"M682.4 867.2c-11.2 0-20-8.8-20-20V372c0-11.2 8.8-20 20-20s20 8.8 20 20v475.2c0.8 11.2-8.8 20-20 20zM367.2 867.2c-11.2 0-20-8.8-20-20V372c0-11.2 8.8-20 20-20s20 8.8 20 20v475.2c0.8 11.2-8.8 20-20 20zM524.8 867.2c-11.2 0-20-8.8-20-20V372c0-11.2 8.8-20 20-20s20 8.8 20 20v475.2c0.8 11.2-8.8 20-20 20zM655.2 213.6v-48.8c0-17.6-14.4-32-32-32H418.4c-18.4 0-32 14.4-32 32.8V208h-40v-42.4c0-40 32.8-72.8 72.8-72.8H624c40 0 72.8 32.8 72.8 72.8v48.8h-41.6z\" fill=\"\" /></svg>\n    </button> : null}</div> */}</div>\n}\nconst RapportinoItem = withScheduler(RapportinoItemView)\n\nexport interface RapportinoCalendarProps {\n  forcePerson?: { id: number, name: string };\n  forceDate?:Date\n}\n\nexport default function RapportinoCalendar(props: RapportinoCalendarProps) {\n  const defaultPerson = props.forcePerson || { id: 0, name: '(Me)' };\n\n  const [date, setDate] = useState<Date>(props.forceDate || new Date());\n  const [data, setData] = useState<any>([]);\n  const [holidays, setHolidays] = useState<Array<number>>();\n  const [unavailableDays, setUnavailableDays] = useState<Array<number>>();\n  const [timeSheetsId, setTimeSheetsId] = useState<number>();\n  const [mobileSelectedDate, setMobileSelectedDate] = useState<Date>();\n  const [showConsolidaConfirmModal, setShowConsolidaConfirmModal] = useState<boolean>(false);\n  const [isFinalized, setIsFinalized] = useState<boolean | undefined>(undefined);\n\n  const [userSelected, setUserSelected] = useState<{ id: number, name: string }>(defaultPerson);\n\n  const [error,setError] = useState<boolean>(false);\n  const [previousDate, setPreviousDate] = useState<Date>();\n\n  const size = useWindowSize();\n\n  const convertToISODateString = (year, month, day, hour, minute) => {\n    const date = new Date(Date.UTC(year, month - 1, day, hour, minute, 0, 0));\n\n    return date.toISOString();\n  };\n\n\n  function mergeRequests(data) {\n    const mergedRequests: any[] = [];\n    const requestMap = {};\n\n    data.forEach(item => {\n      // Verifica se l'elemento ha la proprietà request\n      if (item.request) {\n        const reqId = item.request.id;\n\n        // Se non esiste ancora nel map, lo aggiungiamo\n        if (!requestMap[reqId]) {\n          requestMap[reqId] = {\n            ...item,\n            request: { ...item.request },\n            start: new Date(item.start),\n            end: new Date(item.end)\n          };\n        } else {\n          // Aggiorniamo le date minime e massime\n          const currentStart = new Date(item.start);\n          const currentEnd = new Date(item.end);\n\n          if (currentStart < requestMap[reqId].start) {\n            requestMap[reqId].start = currentStart;\n          }\n          if (currentEnd > requestMap[reqId].end) {\n            requestMap[reqId].end = currentEnd;\n          }\n        }\n      } else {\n        // Se l'elemento non ha request, lo aggiungiamo direttamente\n        mergedRequests.push(item);\n      }\n    });\n\n    // Convertiamo il map in un array e formatta le date come ISO string\n    for (const reqId in requestMap) {\n      const mergedItem = requestMap[reqId];\n      mergedItem.start = mergedItem.start;\n      mergedItem.end = mergedItem.end;\n      mergedRequests.push(mergedItem);\n    }\n\n    return mergedRequests;\n  }\n\n  const fetchTimesheet = () => {\n    const year = date.getFullYear();\n    const month = date.getMonth() + 1;\n    \n    TimesheetsService.findOrCreate(year, month, \"\", userSelected.id > 0 ? userSelected.id : undefined)\n      .then((response) => {\n\n        setTimeSheetsId(response.id);\n        setHolidays(response.holidays);\n        setUnavailableDays(response.unavailable_days);\n        setIsFinalized(!!response?.finalized);\n        setPreviousDate(date);\n\n        let activities: any = [];\n\n        response?.TimesheetDetail.forEach((el) => {\n\n          if (el) {\n            setError(false);\n            activities.push({\n              request: el.LeaveRequest,\n              activity: el.PersonActivity.Activity,\n              person_activity_id: el.person_activity_id,\n              id: el.id,\n              title: el.PersonActivity.Activity.description,\n              day: el.day,\n              hours: el.hours,\n              start: new Date(convertToISODateString(year, month, el.day, 9, 0)),\n              end: new Date(convertToISODateString(year, month, el.day, 18, 0)),\n            });\n          }\n        });\n\n        setData(mergeRequests(activities));\n      })\n      .catch((error) => {\n        console.error(\"Errore:\", error);\n        setError(true)\n      });\n  };\n\n  const handleDateChange = (event: any) => {\n\n    const currentDate = new Date();\n    const nextYear = new Date(currentDate.getFullYear() + 1, currentDate.getMonth(), 1);\n\n    const currentMonth = new Date(event.value.getFullYear(), event.value.getMonth(), 1);\n    const isNextYear = currentMonth > nextYear;\n    \n    if (!isNextYear) setDate(event.value);\n  };\n\n  useEffect(() => {\n    fetchTimesheet();\n    document.addEventListener('CalendarRefreshData', fetchTimesheet);\n    return () => {\n      document.removeEventListener('CalendarRefreshData', fetchTimesheet);\n    }\n  }, [date, userSelected]);\n\n  useEffect(()=>{\n    if(error){\n      NotificationActions.openConfirm(\n        \"Data non valida verrà ripristinata la data precedente\",\n        ()=>{\n          setError(false);\n          if(previousDate) {\n            setDate(previousDate)\n          }\n        },\n        \"Rapportino non disponibile\",\n        ()=>{\n          setError(false);\n          if(previousDate)\n            setDate(previousDate)\n        },\n      )\n    }\n    \n  },[error])\n\n\n  const renderContent = (slot, closeModalCallback) => {\n\n    const dates: Date[] = [];\n    let currentDate = new Date(slot.start);\n    const values = {};\n    const assignment_values = {};\n    const holidaysData = {};\n\n    let hasHolidayInSelection = false;\n    while (currentDate < slot.end) {\n\n      if (!hasHolidayInSelection && holidays?.some(h => h === currentDate.getDate())) {\n        hasHolidayInSelection = true;\n      }\n      dates.push(new Date(currentDate));\n      const valuesByDate = data.filter((el) => {\n        if (el.request) {\n          let startDate = new Date(el.request.start_date);\n          let endDate = new Date(el.request.end_date);\n          return startDate.getDate() <= currentDate.getDate() && endDate.getDate() >= currentDate.getDate();\n        } else {\n          return el.start.getDate() <= currentDate.getDate() && el.end.getDate() >= currentDate.getDate();\n        }\n      });\n      //prendere i dati per riempire le ore dentro il crud\n      if (valuesByDate) {\n        values[currentDate.getDate()] = {};\n        assignment_values[currentDate.getDate()] = {};\n        valuesByDate.forEach((el) => {\n          values[currentDate.getDate()][el.activity.id] = el.hours;\n          assignment_values[currentDate.getDate()][el.activity.id] = el.person_activity_id;\n        });\n      }\n\n      //Prendere orari dei permessi per riempire i timepicker dentro il crud\n      data.filter((el) => {\n        if (!el.request) {\n          return false\n        }\n        let startDate = new Date(el.request.start_date);\n        startDate.setHours(0, 0, 0, 0);\n        let endDate = new Date(el.request.end_date);\n        endDate.setHours(23, 59, 59, 59);\n        return currentDate >= startDate && currentDate <= endDate;\n      }).forEach(hol => {\n        if (!holidaysData[currentDate.getDate()]) {\n          holidaysData[currentDate.getDate()] = {};\n        }\n        let holActData = {\n          hours: hol.hours,\n          approved: hol.request.approve_date ? new Date(hol.request.approve_date) : null,\n          name: hol.title,\n          notes: hol.request.notes\n        }\n        if (holidaysData[currentDate.getDate()][hol.activity.id]) {\n          holidaysData[currentDate.getDate()][hol.activity.id].push(holActData);\n        } else {\n          holidaysData[currentDate.getDate()][hol.activity.id] = [holActData];\n        }\n      });\n\n      currentDate.setDate(currentDate.getDate() + 1); // Incrementa di un giorno\n\n    }\n\n    return {\n      component: (\n        <RapportinoCrud\n          dates={dates}\n          timesheetId={timeSheetsId || 0}\n          values={values}\n          assignment_values={assignment_values}\n          hasHoliday={hasHolidayInSelection}\n          closeModal={() => {\n            closeModalCallback();\n            fetchTimesheet()\n          }}\n          holidaysData={holidaysData}\n          editLocked={!!props.forcePerson || isFinalized || !authService.hasPermission('WRITE_HR_TIMESHEET')}\n        //onClose={closeModalCallback}\n        //onActivitiesAdded={onActivitiesAdded}\n        />\n      ),\n      title: dates.length >= 2\n        ? dates[0]?.toLocaleDateString(\"it-IT\") + ' - ' + dates[dates.length - 1]?.toLocaleDateString(\"it-IT\") || \"\"\n        : dates[0]?.toLocaleDateString(\"it-IT\"),\n    };\n  };\n\n\n  const renderContentMobile = (cellProps: any) => {\n    const ret = {\n      style: {},\n      hours: undefined\n    }\n\n    const isHoliday = holidays?.some((h) => cellProps.value.getDate() === h && cellProps.value.getMonth() === date.getMonth());\n    const request = data.find(d => {\n      if (!d.request) return false;\n      let startDate = new Date(d.request.start_date);\n      let endDate = new Date(d.request.end_date);\n      return startDate.getDate() <= cellProps.value.getDate() && endDate.getDate() >= cellProps.value.getDate() && cellProps.value.getMonth() === date.getMonth();\n    });\n    const activities = data.filter(d => d.day === cellProps.value.getDate() && cellProps.value.getMonth() === date.getMonth());\n    if (isHoliday) {\n      ret.style[\"color\"] = 'red'\n    }\n    if (request) {\n      if (isFinalized) {\n        ret.style[\"background\"] = '#e9ecef';\n      } else if (request.request.approved === true) {\n        ret.style[\"background\"] = 'green';\n      } else if (request.request && request.request.approved === false) {\n        ret.style[\"background\"] = 'red';\n      } else {\n        ret.style[\"background\"] = 'rgb(255, 192, 0)';\n      }\n      ret.hours = activities.reduce((aggregator, obj) => aggregator + obj.hours, 0)\n    } else if (activities.length) {\n      ret.hours = activities.reduce((aggregator, obj) => aggregator + obj.hours, 0)\n    }\n\n    return ret;\n  }\n\n  const getCrudMobile = () => {\n\n    const dates: Date[] = [];\n    const values = {};\n    const assignment_values = {};\n    let hasHolidayInSelection = false;\n    const holidaysData = {};\n\n    if (mobileSelectedDate) {\n      hasHolidayInSelection = holidays ? holidays.some(h => h === mobileSelectedDate.getDate()) : false;\n      dates.push(mobileSelectedDate);\n      values[mobileSelectedDate.getDate()] = {};\n      const dataFiltered = data.filter(el => {\n        if (el.request) {\n          let startDate = new Date(el.request.start_date);\n          let endDate = new Date(el.request.end_date);\n          return startDate.getDate() <= mobileSelectedDate.getDate() && endDate.getDate() >= mobileSelectedDate.getDate();\n        } else {\n          return el.start.getDate() <= mobileSelectedDate.getDate() && el.end.getDate() >= mobileSelectedDate.getDate();\n        }\n      });\n      dataFiltered.forEach(d => {\n        values[mobileSelectedDate.getDate()][d.activity.id] = d.hours;\n        assignment_values[mobileSelectedDate.getDate()][d.activity.id] = d.person_activity_id;\n      });\n\n      data.filter((el) => {\n        if (!el.request) {\n          return false\n        }\n        let startDate = new Date(el.request.start_date);\n        startDate.setHours(0, 0, 0, 0);\n        let endDate = new Date(el.request.end_date);\n        endDate.setHours(23, 59, 59, 59);\n        return mobileSelectedDate >= startDate && mobileSelectedDate <= endDate;\n      }).forEach(hol => {\n        if (!holidaysData[mobileSelectedDate.getDate()]) {\n          holidaysData[mobileSelectedDate.getDate()] = {};\n        }\n        let holActData = {\n          hours: hol.hours,\n          approved: hol.request.approve_date ? new Date(hol.request.approve_date) : null,\n          name: hol.title,\n        }\n        if (holidaysData[mobileSelectedDate.getDate()][hol.activity.id]) {\n          holidaysData[mobileSelectedDate.getDate()][hol.activity.id].push(holActData);\n        } else {\n          holidaysData[mobileSelectedDate.getDate()][hol.activity.id] = [holActData];\n        }\n      });\n    }\n\n    return <RapportinoCrud\n      dates={dates}\n      timesheetId={timeSheetsId || 0}\n      values={values}\n      assignment_values={assignment_values}\n      hasHoliday={hasHolidayInSelection}\n      closeModal={() => {\n        document.dispatchEvent(new CustomEvent(\"CalendarRefreshData\"));\n      }}\n      holidaysData={holidaysData}\n      editLocked={!!props.forcePerson || isFinalized}\n\n    //onClose={closeModalCallback}\n    //onActivitiesAdded={onActivitiesAdded}\n    />\n  }\n\n  const hasUnapprovedRequests = () : boolean => data.some(detail => detail.request && isNil(detail.request.approved));\n  const unApprovedRequestsMessage = \"Impossibile consolidare rapportino con richieste non approvate.\";\n\n  return (\n    <>\n      {!props.forcePerson ? <div style={{ display: 'flex', flexDirection: size.width && size.width >= 768 ? 'row' : 'column', justifyContent: \"space-between\", marginBottom: 10 }}>\n        <p>Tocca una data per inserire le ore di attività o trascina per selezionare più date</p>\n        <div style={{ display: 'flex', justifyContent: \"space-between\", alignItems: 'flex-end', gap: 15 }}>\n          { authService.hasPermission('READ_HR_TIMESHEET_DEAUTH') && !props.forcePerson && <div style={{ width: 300 }}>Utente Selezionato <AutoCompletePerson label=\"\" value={userSelected} onChange={(e) => {\n            if (!e.value) {\n              setUserSelected(defaultPerson)\n            } else {\n              setUserSelected(e.value)\n            }\n          }} />\n          </div>}\n          {isFinalized != undefined && authService.hasPermission('WRITE_HR_TIMESHEET') && \n            <Button style={{ maxHeight: 'min-content' }} themeColor=\"success\" \n            onClick={() => {\n              if (!hasUnapprovedRequests()) setShowConsolidaConfirmModal(true);\n              else NotificationActions.openModal({ icon: true, style: \"error\" }, unApprovedRequestsMessage);\n            }}\n            disabled={isFinalized && !authService.hasPermission('WRITE_HR_TIMESHEET_DEAUTH')}\n            >\n              {isFinalized ? \"Deconsolida\" : \"Consolida\"}\n            </Button>\n          }\n        </div>\n\n      </div> : null}\n\n      <Modal\n        title={isFinalized ? \"Deconsolida\" : \"Consolida\"}\n        callToAction=\"Conferma\"\n        showModalFooter\n        height={250}\n        isOpen={!!showConsolidaConfirmModal}\n        onClose={() => setShowConsolidaConfirmModal(false)}\n        onSubmit={() => {\n          if (!isFinalized) {\n            TimesheetsService.finalizeTimesheet(timeSheetsId || 0).then(res => {\n              if (res) {\n                setIsFinalized(true);\n              }\n            }).finally(() => {\n              setShowConsolidaConfirmModal(false);\n            })\n          } else {\n            TimesheetsService.deconsolidateTimesheet(timeSheetsId || 0).then(res => {\n              if (res) {\n                setIsFinalized(false);\n              }\n            }).finally(() => {\n              setShowConsolidaConfirmModal(false);\n            });\n          }\n        }}\n      >\n        L'operazione è irreversibile.\n      </Modal>\n\n{\n  error ? <div>Data selezionata non valida</div>:size.width && size.width >= 768 ? (\n    <Calendar\n      date={date}\n      model={{\n        timeSheetsId: timeSheetsId,\n      }}\n      //timezone=\"UTC\"\n      handleDateChange={handleDateChange}\n      defaultView=\"month\"\n      handleDataChange={() => { }}\n      data={data}\n      contentModal={renderContent}\n      item={RapportinoItem}\n      holidays={holidays}\n      unavailableDays={unavailableDays}\n      disableDrag={!!props.forcePerson}\n      isFinalized={!props.forcePerson && isFinalized}\n    />\n  ) : (<>\n    <CalendarMobile\n      topView=\"month\"\n      navigation={true}\n      focusedDate={date}\n      data={data}\n      cellProps={renderContentMobile}\n\n      header={(p) => {\n\n        return <>\n          <p style={{ marginLeft: 10 }}>{p.headerTitleProps.value}</p>\n          <div style={{ display: 'flex', gap: 10, marginRight: 10 }}>\n            <Button onClick={() => {\n              setDate(new Date(date.getFullYear(), date.getMonth() - 1, date.getDate()));\n            }}><SvgIcon icon={chevronLeftIcon} /></Button>\n            <Button onClick={() => {\n              setDate(new Date(date.getFullYear(), date.getMonth() + 1, date.getDate()));\n            }}><SvgIcon icon={chevronRightIcon} /></Button>\n          </div>\n        </>\n      }}\n      min={new Date(date.getFullYear(), date.getMonth(), 1)}\n      max={new Date(date.getFullYear(), date.getMonth() + 1, 0)}\n      onChange={(ev) => {\n        setMobileSelectedDate(ev.value);\n      }}\n      isFinalized={!props.forcePerson && isFinalized}\n    />\n    {\n      mobileSelectedDate && getCrudMobile()\n    }\n  </>\n  )\n}\n      \n    </>\n  );\n}\n"],"names":["RapportinoItem","withScheduler","props","bg","undefined","color","status","request","approved","React","style","background","width","height","position","right","left","top","bottom","textAlign","overflow","whiteSpace","textOverflow","fontSize","concat","hours","title","RapportinoCalendar","dates","values","assignment_values","hasHolidayInSelection","holidaysData","defaultPerson","forcePerson","id","name","_useState","useState","forceDate","Date","_useState2","_slicedToArray","date","setDate","_useState3","_useState4","data","setData","_useState5","_useState6","holidays","setHolidays","_useState7","_useState8","unavailableDays","setUnavailableDays","_useState9","_useState10","timeSheetsId","setTimeSheetsId","_useState11","_useState12","mobileSelectedDate","setMobileSelectedDate","_useState13","_useState14","showConsolidaConfirmModal","setShowConsolidaConfirmModal","_useState15","_useState16","isFinalized","setIsFinalized","_useState17","_useState18","userSelected","setUserSelected","_useState19","_useState20","error","setError","_useState21","_useState22","previousDate","setPreviousDate","size","useWindowSize","convertToISODateString","year","month","day","hour","minute","UTC","toISOString","fetchTimesheet","getFullYear","getMonth","TimesheetsService","findOrCreate","then","response","unavailable_days","finalized","activities","TimesheetDetail","forEach","el","push","LeaveRequest","activity","PersonActivity","Activity","person_activity_id","description","start","end","mergedRequests","requestMap","reqId","item","currentStart","currentEnd","_objectSpread","mergedItem","mergeRequests","console","useEffect","document","addEventListener","removeEventListener","NotificationActions","display","flexDirection","justifyContent","marginBottom","alignItems","gap","authService","AutoCompletePerson","label","value","onChange","e","Button","maxHeight","themeColor","onClick","some","detail","isNil","icon","disabled","Modal","callToAction","showModalFooter","isOpen","onClose","onSubmit","deconsolidateTimesheet","res","finalizeTimesheet","Calendar","model","handleDateChange","event","currentDate","nextYear","defaultView","handleDataChange","contentModal","slot","closeModalCallback","_dates$","_dates","_dates$2","h","getDate","valuesByDate","filter","startDate","start_date","endDate","end_date","setHours","hol","holActData","approve_date","notes","component","RapportinoCrud","timesheetId","hasHoliday","closeModal","editLocked","length","toLocaleDateString","disableDrag","CalendarMobile","topView","navigation","focusedDate","cellProps","ret","isHoliday","find","d","reduce","aggregator","obj","header","p","marginLeft","headerTitleProps","marginRight","SvgIcon","chevronLeftIcon","chevronRightIcon","min","max","ev","dispatchEvent","CustomEvent"],"sourceRoot":""}