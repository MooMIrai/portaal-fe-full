"use strict";(self.webpackChunkportaal_mfe_lookUps=self.webpackChunkportaal_mfe_lookUps||[]).push([[322],{9196:(e,r,t)=>{t.d(r,{A:()=>Y});var n=t(7136),a=t(9648),c=t(2816),o=t(9352),u=t(2207),i=t.n(u),s=t(4914),l=t.n(s),p=t(9029),f=t.n(p),d=t(8733),v=t.n(d),m=t(1932),h=t.n(m),A=t(8539),b=t.n(A),x=t(8812),g=t(6752),w=t(9542),y=t(1178),k=t.n(y),E=new((0,g.A)((function e(){(0,w.A)(this,e),(0,n.A)(this,"token",null),(0,n.A)(this,"fetchResources",function(){var e=(0,c.A)(i().mark((function e(r,t,n,a){var c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={pageNum:t,pageSize:n,include:a},e.next=4,k().get("api/v1/crud/".concat(r,"/"),{params:c});case 4:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r,t,n,a){return e.apply(this,arguments)}}()),(0,n.A)(this,"searchGenericGrid",function(){var e=(0,c.A)(i().mark((function e(r,t,n,a,c,o,u){var s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={pageNum:t,pageSize:n,term:o,include:u},e.next=4,k().post("api/v1/crud/".concat(r),{filtering:a,sorting:c},{params:s});case 4:return l=e.sent,e.abrupt("return",null==l?void 0:l.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error filtering resources:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r,t,n,a,c,o,u){return e.apply(this,arguments)}}()),(0,n.A)(this,"getGridModel",function(){var e=(0,c.A)(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().get("api/v1/crud/".concat(r,"/models"));case 3:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resources:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}()),(0,n.A)(this,"createResource",function(){var e=(0,c.A)(i().mark((function e(r,t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().post("api/v1/crud/".concat(r,"/create"),t);case 3:return n=e.sent,e.abrupt("return",null==n?void 0:n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error creating resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}()),(0,n.A)(this,"fetchResource",function(){var e=(0,c.A)(i().mark((function e(r,t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().get("api/v1/crud/".concat(r,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",null==n?void 0:n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}()),(0,n.A)(this,"updateResource",function(){var e=(0,c.A)(i().mark((function e(r,t,n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().patch("api/v1/crud/".concat(r,"/update/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error updating resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t,n){return e.apply(this,arguments)}}()),(0,n.A)(this,"deleteResource",function(){var e=(0,c.A)(i().mark((function e(r,t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().delete("api/v1/crud/".concat(r,"/delete/").concat(t));case 3:return n=e.sent,e.abrupt("return",null==n?void 0:n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error deleting resource:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}())}))),C=t(8734),O=[{id:2,name:"ProjectType"},{id:3,name:"ActivityType"},{id:4,name:"AccountStatus"},{id:5,name:"WorkScope"},{id:6,name:"ContractType"},{id:7,name:"ProjectExpenses"},{id:8,name:"NotificationStatus"},{id:9,name:"NotifyResponseType"},{id:10,name:"EmailDefault"}],j=t.n(C)()((function(){return Promise.resolve(O)})),P=t(5072),S=t.n(P),R=t(7825),D=t.n(R),T=t(7659),B=t.n(T),I=t(5056),_=t.n(I),G=t(540),N=t.n(G),q=t(1113),z=t.n(q),Q=t(5699),U={};U.styleTagTransform=z(),U.setAttributes=_(),U.insert=B().bind(null,"head"),U.domAPI=D(),U.insertStyleElement=N(),S()(Q.A,U);const W=Q.A&&Q.A.locals?Q.A.locals:void 0;var L=["id","tenant_code"];function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function K(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var M=["date_created","date_modified","user_created","user_modified"],F=function(e){switch(e){case"Int":return"numeric";case"DateTime":return"date";default:return"text"}};const Y=function(){var e=(0,s.useState)("ProjectType"),r=(0,o.A)(e,2),t=r[0],n=r[1],u=(0,s.useState)(O.find((function(e){return"ProjectType"===e.name}))),p=(0,o.A)(u,2),d=p[0],m=p[1],A=(0,s.useState)([]),g=(0,o.A)(A,2),w=g[0],y=g[1],k=(0,s.useState)({}),C=(0,o.A)(k,2),P=C[0],S=C[1],R=(0,s.useState)(),D=(0,o.A)(R,2),T=D[0],B=D[1],I=(0,x.useDebounce)(T,650),_=(0,s.useRef)(null),G=function(){var e=(0,c.A)(i().mark((function e(r){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.getGridModel(r.toLowerCase());case 3:if(t=e.sent){e.next=6;break}throw new Error("No resources found");case 6:y((a=t)&&0!==a.length?a.filter((function(e){return!M.includes(e.name)})).map((function(e){return{key:e.name,label:e.name.charAt(0).toUpperCase()+e.name.slice(1),sortable:e.sortable,filter:F(e.type)}})):[]),n={},t.filter((function(e){return!M.includes(e.name)})).forEach((function(e){var r;n[e.name]={name:e.name,type:(r=e.type,"boolean"==typeof r?"checkbox":"number"==typeof r?"number":"string"==typeof r?r.includes("@")?"email":"text":(Date,"date")),label:e.name.charAt(0).toUpperCase()+e.name.slice(1),value:"",disabled:e.readOnly,required:e.required}})),S(n),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error loading fields:",e.t0),S({}),y([]);case 17:case"end":return e.stop()}var a}),e,null,[[0,12]])})));return function(r){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){t&&G(t)}),[t]);var N=function(){var e=(0,c.A)(i().mark((function e(r,n,a){var c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.searchGenericGrid(t,r.currentPage,r.pageSize,n,a,I);case 3:return c=e.sent,e.abrupt("return",c);case 7:e.prev=7,e.t0=e.catch(0),console.error("Error loading data:",e.t0),y([]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t,n){return e.apply(this,arguments)}}(),q=function(e){B(e.target.value)},z=function(){var e=(0,c.A)(i().mark((function e(r,n,c){var o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=n.id,n.tenant_code,u=(0,a.A)(n,L),"create"!==r){e.next=7;break}return e.next=5,E.createResource(t,u);case 5:e.next=15;break;case 7:if("edit"!==r){e.next=12;break}return e.next=10,E.updateResource(t,o,u);case 10:e.next=15;break;case 12:if("delete"!==r){e.next=15;break}return e.next=15,E.deleteResource(t,n);case 15:c(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Error in submitting form data:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(r,t,n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){_.current&&t&&_.current.refreshTable()}),[I,t]),l().createElement("div",null,l().createElement(f(),{ref:_,className:"text-align-center",initialHeightWindow:800,initialWidthWindow:900,dropListLookup:!0,customToolBarComponent:function(){return l().createElement(l().Fragment,null,l().createElement(h(),{placeholder:"Cerca",value:T,onChange:q}),l().createElement(j,{value:d,placeholder:"Inserisci Tipologica",onChange:function(e){return a=null==(r=e)||null===(t=r.value)||void 0===t?void 0:t.name,n(a),m(O.find((function(e){return e.name===a}))),void(a&&G(a));var r,t,a}}))},filterable:!0,sortable:!0,pageable:!0,getData:N,columns:w,resizable:!0,writePermissions:["WRITE_LOOKUPS"],actions:function(){return["create","delete","edit","show"]},formCrud:function(e,r,t,n){var a,o,u="view"===r,s=Object.values(P).filter((function(e){return"create"!==r&&"edit"!==r||"id"!==e.name})).map((function(e){return K(K({},e),{},{disabled:u})})),p=(a=e,o=M,Object.keys(a).filter((function(e){return!o.includes(e)})).reduce((function(e,r){return e[r]=a[r],e}),{}));return l().createElement(l().Fragment,null,"delete"===r?l().createElement("div",{className:W.formDelete},l().createElement("span",null,"Sei sicuro di voler eliminare il record?"),l().createElement("div",null,l().createElement(b(),{onClick:t},"Cancel"),l().createElement(b(),{themeColor:"error",onClick:(0,c.A)(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z(r,null==e?void 0:e.id,n);case 2:t();case 3:case"end":return a.stop()}}),a)})))},"Elimina"))):l().createElement(v(),{submitText:u?"Esci":"Salva",customDisabled:u,formData:p,fields:s,showSubmit:!u,extraButton:!0,extraBtnAction:t,onSubmit:function(){var e=(0,c.A)(i().mark((function e(a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(r,a,n);case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}))}}))}},5699:(e,r,t)=>{t.d(r,{A:()=>u});var n=t(1354),a=t.n(n),c=t(6314),o=t.n(c)()(a());o.push([e.id,".f3P9k9q078q0RZZ6YrRc{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap:20px;\n    align-items: center;\n    font-size: 20px;\n    \n     & > div {\n        display: flex;\n        gap:20px;\n     }\n }","",{version:3,sources:["webpack://./src/pages/Main/style.module.scss"],names:[],mappings:"AAAA;IACI,aAAa;IACb,sBAAsB;IACtB,uBAAuB;IACvB,QAAQ;IACR,mBAAmB;IACnB,eAAe;;KAEd;QACG,aAAa;QACb,QAAQ;KACX;CACJ",sourcesContent:[".formDelete{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap:20px;\n    align-items: center;\n    font-size: 20px;\n    \n     & > div {\n        display: flex;\n        gap:20px;\n     }\n }"],sourceRoot:""}]),o.locals={formDelete:"f3P9k9q078q0RZZ6YrRc"};const u=o}}]);
//# sourceMappingURL=322.js.map